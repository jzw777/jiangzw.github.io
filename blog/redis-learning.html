<!doctype html>
<html lang="zh-Hans" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">redis学习笔记 | 姜米尔的技术分享小站</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://jzw777.github.io/blog/redis-learning"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="keywords" content="java,k8s,docker"><meta data-rh="true" property="og:title" content="redis学习笔记 | 姜米尔的技术分享小站"><meta data-rh="true" name="description" content="Redis(Remote Dictionary Server)，即远程字典服务，是一个开源的使用ANSI C语言编写、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库"><meta data-rh="true" property="og:description" content="Redis(Remote Dictionary Server)，即远程字典服务，是一个开源的使用ANSI C语言编写、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库"><meta data-rh="true" property="og:image" content="https://test.preview.qingxinzhimei.com/2023/02/08/ERP202302080000001377.jpg"><meta data-rh="true" name="twitter:image" content="https://test.preview.qingxinzhimei.com/2023/02/08/ERP202302080000001377.jpg"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2022-12-21T15:28:14.000Z"><meta data-rh="true" property="article:tag" content="redis"><link data-rh="true" rel="icon" href="/img/my.ico"><link data-rh="true" rel="canonical" href="https://jzw777.github.io/blog/redis-learning"><link data-rh="true" rel="alternate" href="https://jzw777.github.io/blog/redis-learning" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://jzw777.github.io/blog/redis-learning" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://KRR9VEUPCT-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="姜米尔的技术分享小站" href="/opensearch.xml">

<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="姜米尔的技术分享小站 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="姜米尔的技术分享小站 Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="姜米尔的技术分享小站 JSON Feed"><link rel="stylesheet" href="/assets/css/styles.01df5472.css">
<link rel="preload" href="/assets/js/runtime~main.8fccb9be.js" as="script">
<link rel="preload" href="/assets/js/main.3f4d3cd1.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav class="navbar flex fixed w-full h-16 py-2 px-3 lg:px-9 z-[2] ease-out transition-transform duration-200 shadow-none backdrop-blur-[8px]"><div class="navbar__inner"><div class="navbar__items flex gap-0 lg:gap-3 xl:gap-6 font-montserrat font-semibold"><button aria-label="Navigation bar toggle" class="bg-transparent border-0 cursor-pointer px-0 pb-0 pt-0.5 text-[#1890FF] lg:hidden" type="button" tabindex="0"><svg width="24" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 2a2 2 0 0 1 2-2h20a2 2 0 1 1 0 4H2a2 2 0 0 1-2-2Zm0 8a2 2 0 0 1 2-2h20a2 2 0 1 1 0 4H2a2 2 0 0 1-2-2Zm24 8a2 2 0 0 0-2-2H2a2 2 0 1 0 0 4h20a2 2 0 0 0 2-2Z" fill="currentColor"></path></svg></button><a class="mx-auto lg:mx-0" href="/"><svg width="125" height="42" viewBox="0 0 125 42" fill="none" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" class="select-none mx-auto pr-6 lg:ml-0 lg:mr-2 lg:pr-0 items-center flex min-w-[110px] max-w-[110px]"><path d="M48.0451 14.6901H44.9875C44.864 14.6877 44.7464 14.6419 44.6591 14.5623C44.5718 14.4827 44.5216 14.3754 44.5189 14.2629V13.7477C44.5178 11.5981 45.5904 10.5233 47.7368 10.5233C48.4475 10.5162 49.1518 10.6457 49.8039 10.9034C49.9072 10.946 50.0191 10.9688 50.1324 10.9702C50.2458 10.9717 50.3583 10.9518 50.4629 10.9119C50.5674 10.872 50.6619 10.8128 50.7403 10.7381C50.8186 10.6634 50.8793 10.5748 50.9185 10.4778L52.2087 7.23297C52.2794 7.05617 52.2754 6.8617 52.1973 6.68748C52.1193 6.51325 51.9729 6.37177 51.7867 6.29063C51.2361 6.05161 50.6584 5.86833 50.064 5.74407C49.0754 5.53275 48.0632 5.42733 47.0477 5.42995C44.055 5.42891 41.7352 6.17284 40.0884 7.66174C38.4415 9.15064 37.6181 11.1625 37.6181 13.6975V33.2087C37.6181 34.0638 37.9907 34.884 38.654 35.4887C39.3172 36.0934 40.2167 36.4331 41.1547 36.4331C41.6191 36.4331 42.079 36.3497 42.508 36.1876C42.9371 36.0256 43.327 35.7881 43.6554 35.4887C43.9838 35.1893 44.2443 34.8338 44.422 34.4426C44.5997 34.0514 44.6912 33.6321 44.6912 33.2087V20.085C44.6912 19.9696 44.7415 19.8589 44.831 19.7773C44.9204 19.6958 45.0418 19.6499 45.1684 19.6499H48.0451C48.7665 19.6499 49.4584 19.3886 49.9685 18.9236C50.4786 18.4585 50.7652 17.8277 50.7652 17.17C50.7652 16.5123 50.4786 15.8815 49.9685 15.4164C49.4584 14.9513 48.7665 14.6901 48.0451 14.6901Z" fill="#1890FF"></path><path d="M90.8142 24.4437C90.8142 21.111 89.726 18.4933 87.5498 16.5909C85.3736 14.6894 82.3509 13.7392 78.4819 13.7403C74.6129 13.7413 71.5903 14.692 69.4141 16.5924C67.2378 18.4928 66.1497 21.1104 66.1497 24.4453V33.2091C66.1497 34.0643 66.5223 34.8844 67.1855 35.4891C67.8488 36.0938 68.7483 36.4335 69.6862 36.4335C70.6242 36.4335 71.5237 36.0938 72.187 35.4891C72.8502 34.8844 73.2228 34.0643 73.2228 33.2091V24.6526C73.2216 22.8119 73.6597 21.4204 74.5371 20.478C75.4145 19.5357 76.699 19.0645 78.3906 19.0645C80.1144 19.0708 81.4219 19.542 82.313 20.478C83.2042 21.4141 83.6498 22.8056 83.6498 24.6526V33.2075C83.6498 34.0627 84.0224 34.8828 84.6856 35.4875C85.3488 36.0922 86.2484 36.4319 87.1863 36.4319H87.2776C88.2156 36.4319 89.1151 36.0922 89.7783 35.4875C90.4416 34.8828 90.8142 34.0627 90.8142 33.2075V24.4437Z" fill="#1890FF"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M117.05 26.6766H100.912C100.854 26.6766 100.796 26.6891 100.744 26.7129C100.692 26.7367 100.647 26.7712 100.612 26.8137C100.577 26.8562 100.554 26.9055 100.543 26.9578C100.533 27.01 100.536 27.0638 100.552 27.1148C100.918 28.2647 101.709 29.2636 102.791 29.9418C104.026 30.7407 105.565 31.1401 107.41 31.1401C108.561 31.1583 109.706 30.9832 110.788 30.6234C111.118 30.5075 111.439 30.37 111.747 30.2119C112.838 29.656 114.405 29.8554 115.253 30.6925L115.291 30.7302C115.578 31.0155 115.792 31.3559 115.916 31.7264C116.039 32.097 116.07 32.4881 116.006 32.871C115.942 33.254 115.784 33.6189 115.545 33.9388C115.305 34.2587 114.99 34.5255 114.622 34.7195C112.626 35.778 110.162 36.3073 107.229 36.3073C104.473 36.3073 102.039 35.8184 99.9285 34.8404C97.9033 33.9372 96.2044 32.524 95.0328 30.7679C93.8844 29.033 93.3102 27.0624 93.3102 24.8563C93.2785 22.7886 93.8664 20.7522 95.0104 18.9666C96.1231 17.235 97.7401 15.8183 99.6822 14.8737C101.662 13.8968 103.875 13.4084 106.321 13.4084C108.709 13.4084 110.87 13.8764 112.805 14.8125C114.716 15.7303 116.298 17.1298 117.361 18.8441C118.465 20.5937 119.017 22.6261 119.017 24.9411V24.9631C118.995 25.4251 118.779 25.8617 118.412 26.1812C118.045 26.5007 117.557 26.6782 117.05 26.6766ZM102.332 19.5257C101.372 20.2617 100.709 21.2689 100.449 22.3873C100.433 22.4506 100.433 22.5162 100.449 22.5794C100.465 22.6426 100.496 22.7018 100.54 22.7525C100.585 22.8032 100.641 22.8441 100.705 22.8722C100.769 22.9004 100.839 22.915 100.91 22.915H111.782C111.853 22.9148 111.923 22.9 111.987 22.8717C112.051 22.8433 112.107 22.8022 112.152 22.7514C112.196 22.7005 112.227 22.6412 112.242 22.5779C112.258 22.5147 112.258 22.449 112.242 22.3858C111.971 21.2779 111.311 20.2808 110.362 19.5462C109.274 18.7085 107.944 18.2897 106.373 18.2897C104.766 18.2866 103.419 18.6986 102.332 19.5257Z" fill="#1890FF"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M54.2812 15.092C55.2274 14.229 56.5104 13.7434 57.8487 13.7418C59.1871 13.7434 60.4701 14.229 61.4163 15.092C62.3625 15.955 62.8947 17.1249 62.896 18.3451V31.7107C62.896 32.9312 62.3642 34.1017 61.4177 34.9647C60.4712 35.8277 59.1874 36.3125 57.8487 36.3125C56.5101 36.3125 55.2263 35.8277 54.2798 34.9647C53.3332 34.1017 52.8015 32.9312 52.8015 31.7107V18.3451C52.8028 17.1249 53.335 15.955 54.2812 15.092ZM60.3494 16.0651C59.6862 15.4605 58.7867 15.1207 57.8487 15.1207C57.3843 15.1207 56.9244 15.2041 56.4954 15.3662C56.0663 15.5282 55.6764 15.7657 55.348 16.0651C55.0196 16.3646 54.7591 16.72 54.5814 17.1112C54.4037 17.5024 54.3122 17.9217 54.3122 18.3451V31.7107C54.3122 32.5659 54.6848 33.386 55.348 33.9907C56.0113 34.5954 56.9108 34.9351 57.8487 34.9351C58.7867 34.9351 59.6862 34.5954 60.3494 33.9907C61.0127 33.386 61.3853 32.5659 61.3853 31.7107V18.3451C61.3853 17.49 61.0127 16.6698 60.3494 16.0651Z" fill="#1890FF"></path><path d="M60.5393 18.2695C60.5393 19.6244 59.3346 20.7227 57.8486 20.7227C56.3625 20.7227 55.1579 19.6244 55.1579 18.2695C55.1579 16.9146 56.3625 15.8162 57.8486 15.8162C59.3346 15.8162 60.5393 16.9146 60.5393 18.2695Z" fill="#3FDCF7"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M9.51003 11.3122C9.51003 8.87129 8.9224 7.71352 10.4884 6.27983H28.1853C30.315 6.85858 34.6398 8.58047 34.9019 10.838C35.295 11.9674 35.2841 14.4936 35.2295 15.6155C35.1749 15.7561 34.9346 16.2749 34.4104 17.2255C33.8862 18.176 32.3354 19.2512 31.6255 19.67L30.1511 20.0889V20.4674C32.248 20.4674 33.4275 21.8224 33.7551 22.4999C35.1967 24.091 35.1203 26.2226 34.9019 27.0895V28.7724C33.9845 31.0978 32.9907 32.3773 32.6084 32.7264L30.1511 34.4169L27.8577 35.8312L13.5781 35.8308L5.41457 35.8312C3.44875 32.1931 5.46917 30.9983 6.72511 30.8557H10.4884L13.5781 11.3122H9.51003ZM17.0457 30.8557L18.3562 23.7238H25.5642C27.0058 23.7238 27.6939 24.9477 27.8577 25.5597V28.1604C27.5847 29.0588 26.3506 30.8557 23.5984 30.8557H17.0457ZM25.5642 17.9103H19.3391L20.5546 11.7908H26.2195C26.984 11.7908 28.513 12.2203 28.513 13.9383V15.4625C28.4037 16.2784 27.6611 17.9103 25.5642 17.9103Z" fill="#3FDCF7"></path></svg></a><div class="relative flex items-center -my-2.5 h-[calc(100%+20px)]" data-headlessui-state=""><div aria-expanded="false" data-headlessui-state=""><a class="navbar__item navbar__link text-[#2A2A42] hover:text-[#2a2a42] hover:no-underline hoverline-link p-0 cursor-pointer flex items-center">文档中心</a><svg width="7" height="5" viewBox="0 0 7 5" fill="none" xmlns="http://www.w3.org/2000/svg" class="ml-1 transition"><path d="M0.146447 0.732232C-0.0488156 0.927494 -0.0488155 1.24408 0.146447 1.43934L2.97487 4.26777C3.17014 4.46303 3.48672 4.46303 3.68198 4.26777L6.51041 1.43934C6.70567 1.24408 6.70567 0.927494 6.51041 0.732232C6.31515 0.536969 5.99856 0.53697 5.8033 0.732232L3.32843 3.20711L0.853553 0.732232C0.658291 0.536969 0.341709 0.536969 0.146447 0.732232Z" fill="#ABABB2"></path></svg></div></div><a class="navbar__item navbar__link text-[#2A2A42] hover:text-[#2a2a42] hover:no-underline hoverline-link undefined p-0 with-hoverline" href="/website">导航</a><a aria-current="page" class="navbar__item navbar__link text-[#2A2A42] hover:text-[#2a2a42] hover:no-underline hoverline-link undefined p-0 with-hoverline navbar__link--active" href="/blog">博客</a></div><div class="navbar__items navbar__items--right flex gap-3"><a href="https://github.com/jzw777/Poseidon" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link text-[#2A2A42] hover:text-[#2a2a42] hover:no-underline hoverline-link header-icon-link header-github-link p-0 with-hoverline"></a><a href="https://discord.gg/fVabfAQGdr" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link text-[#2A2A42] hover:text-[#2a2a42] hover:no-underline hoverline-link header-icon-link header-discord-link p-0 with-hoverline"></a><div class="relative top-1" data-headlessui-state=""><div aria-expanded="false" data-headlessui-state=""><a class="navbar__item navbar__link text-[#2A2A42] hover:text-[#2a2a42] hover:no-underline hoverline-link header-icon-link header-wechat-link p-0 with-hoverline"></a></div></div><div class="toggle_vylO colorModeToggle_x44X navbar-theme-toggle"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="refine-docsearch-button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div class="navbar-sidebar h-screen w-full bg-[#fff] with-hoverline"><div class="navbar-sidebar__brand"><div class="absolute left-5 top-6"><button type="button" class="clean-btn navbar-sidebar__close"><svg width="20" height="20" viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.414 5.585a2 2 0 0 1-2.829 0l-4.17-4.171a2 2 0 0 0-2.83 2.828l4.172 4.171a2 2 0 0 1 0 2.829l-4.343 4.342a2 2 0 1 0 2.829 2.829l4.342-4.343a2 2 0 0 1 2.829 0l4.314 4.314a2 2 0 0 0 2.828-2.828l-4.314-4.314a2 2 0 0 1 0-2.829l4.143-4.142a2 2 0 1 0-2.829-2.829l-4.142 4.143Z" fill="#1890FF"></path></svg></button></div><a class="mx-auto lg:mx-0" href="/"><svg width="125" height="42" viewBox="0 0 125 42" fill="none" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" class="select-none mx-auto items-center flex min-w-0"><path d="M48.0451 14.6901H44.9875C44.864 14.6877 44.7464 14.6419 44.6591 14.5623C44.5718 14.4827 44.5216 14.3754 44.5189 14.2629V13.7477C44.5178 11.5981 45.5904 10.5233 47.7368 10.5233C48.4475 10.5162 49.1518 10.6457 49.8039 10.9034C49.9072 10.946 50.0191 10.9688 50.1324 10.9702C50.2458 10.9717 50.3583 10.9518 50.4629 10.9119C50.5674 10.872 50.6619 10.8128 50.7403 10.7381C50.8186 10.6634 50.8793 10.5748 50.9185 10.4778L52.2087 7.23297C52.2794 7.05617 52.2754 6.8617 52.1973 6.68748C52.1193 6.51325 51.9729 6.37177 51.7867 6.29063C51.2361 6.05161 50.6584 5.86833 50.064 5.74407C49.0754 5.53275 48.0632 5.42733 47.0477 5.42995C44.055 5.42891 41.7352 6.17284 40.0884 7.66174C38.4415 9.15064 37.6181 11.1625 37.6181 13.6975V33.2087C37.6181 34.0638 37.9907 34.884 38.654 35.4887C39.3172 36.0934 40.2167 36.4331 41.1547 36.4331C41.6191 36.4331 42.079 36.3497 42.508 36.1876C42.9371 36.0256 43.327 35.7881 43.6554 35.4887C43.9838 35.1893 44.2443 34.8338 44.422 34.4426C44.5997 34.0514 44.6912 33.6321 44.6912 33.2087V20.085C44.6912 19.9696 44.7415 19.8589 44.831 19.7773C44.9204 19.6958 45.0418 19.6499 45.1684 19.6499H48.0451C48.7665 19.6499 49.4584 19.3886 49.9685 18.9236C50.4786 18.4585 50.7652 17.8277 50.7652 17.17C50.7652 16.5123 50.4786 15.8815 49.9685 15.4164C49.4584 14.9513 48.7665 14.6901 48.0451 14.6901Z" fill="#1890FF"></path><path d="M90.8142 24.4437C90.8142 21.111 89.726 18.4933 87.5498 16.5909C85.3736 14.6894 82.3509 13.7392 78.4819 13.7403C74.6129 13.7413 71.5903 14.692 69.4141 16.5924C67.2378 18.4928 66.1497 21.1104 66.1497 24.4453V33.2091C66.1497 34.0643 66.5223 34.8844 67.1855 35.4891C67.8488 36.0938 68.7483 36.4335 69.6862 36.4335C70.6242 36.4335 71.5237 36.0938 72.187 35.4891C72.8502 34.8844 73.2228 34.0643 73.2228 33.2091V24.6526C73.2216 22.8119 73.6597 21.4204 74.5371 20.478C75.4145 19.5357 76.699 19.0645 78.3906 19.0645C80.1144 19.0708 81.4219 19.542 82.313 20.478C83.2042 21.4141 83.6498 22.8056 83.6498 24.6526V33.2075C83.6498 34.0627 84.0224 34.8828 84.6856 35.4875C85.3488 36.0922 86.2484 36.4319 87.1863 36.4319H87.2776C88.2156 36.4319 89.1151 36.0922 89.7783 35.4875C90.4416 34.8828 90.8142 34.0627 90.8142 33.2075V24.4437Z" fill="#1890FF"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M117.05 26.6766H100.912C100.854 26.6766 100.796 26.6891 100.744 26.7129C100.692 26.7367 100.647 26.7712 100.612 26.8137C100.577 26.8562 100.554 26.9055 100.543 26.9578C100.533 27.01 100.536 27.0638 100.552 27.1148C100.918 28.2647 101.709 29.2636 102.791 29.9418C104.026 30.7407 105.565 31.1401 107.41 31.1401C108.561 31.1583 109.706 30.9832 110.788 30.6234C111.118 30.5075 111.439 30.37 111.747 30.2119C112.838 29.656 114.405 29.8554 115.253 30.6925L115.291 30.7302C115.578 31.0155 115.792 31.3559 115.916 31.7264C116.039 32.097 116.07 32.4881 116.006 32.871C115.942 33.254 115.784 33.6189 115.545 33.9388C115.305 34.2587 114.99 34.5255 114.622 34.7195C112.626 35.778 110.162 36.3073 107.229 36.3073C104.473 36.3073 102.039 35.8184 99.9285 34.8404C97.9033 33.9372 96.2044 32.524 95.0328 30.7679C93.8844 29.033 93.3102 27.0624 93.3102 24.8563C93.2785 22.7886 93.8664 20.7522 95.0104 18.9666C96.1231 17.235 97.7401 15.8183 99.6822 14.8737C101.662 13.8968 103.875 13.4084 106.321 13.4084C108.709 13.4084 110.87 13.8764 112.805 14.8125C114.716 15.7303 116.298 17.1298 117.361 18.8441C118.465 20.5937 119.017 22.6261 119.017 24.9411V24.9631C118.995 25.4251 118.779 25.8617 118.412 26.1812C118.045 26.5007 117.557 26.6782 117.05 26.6766ZM102.332 19.5257C101.372 20.2617 100.709 21.2689 100.449 22.3873C100.433 22.4506 100.433 22.5162 100.449 22.5794C100.465 22.6426 100.496 22.7018 100.54 22.7525C100.585 22.8032 100.641 22.8441 100.705 22.8722C100.769 22.9004 100.839 22.915 100.91 22.915H111.782C111.853 22.9148 111.923 22.9 111.987 22.8717C112.051 22.8433 112.107 22.8022 112.152 22.7514C112.196 22.7005 112.227 22.6412 112.242 22.5779C112.258 22.5147 112.258 22.449 112.242 22.3858C111.971 21.2779 111.311 20.2808 110.362 19.5462C109.274 18.7085 107.944 18.2897 106.373 18.2897C104.766 18.2866 103.419 18.6986 102.332 19.5257Z" fill="#1890FF"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M54.2812 15.092C55.2274 14.229 56.5104 13.7434 57.8487 13.7418C59.1871 13.7434 60.4701 14.229 61.4163 15.092C62.3625 15.955 62.8947 17.1249 62.896 18.3451V31.7107C62.896 32.9312 62.3642 34.1017 61.4177 34.9647C60.4712 35.8277 59.1874 36.3125 57.8487 36.3125C56.5101 36.3125 55.2263 35.8277 54.2798 34.9647C53.3332 34.1017 52.8015 32.9312 52.8015 31.7107V18.3451C52.8028 17.1249 53.335 15.955 54.2812 15.092ZM60.3494 16.0651C59.6862 15.4605 58.7867 15.1207 57.8487 15.1207C57.3843 15.1207 56.9244 15.2041 56.4954 15.3662C56.0663 15.5282 55.6764 15.7657 55.348 16.0651C55.0196 16.3646 54.7591 16.72 54.5814 17.1112C54.4037 17.5024 54.3122 17.9217 54.3122 18.3451V31.7107C54.3122 32.5659 54.6848 33.386 55.348 33.9907C56.0113 34.5954 56.9108 34.9351 57.8487 34.9351C58.7867 34.9351 59.6862 34.5954 60.3494 33.9907C61.0127 33.386 61.3853 32.5659 61.3853 31.7107V18.3451C61.3853 17.49 61.0127 16.6698 60.3494 16.0651Z" fill="#1890FF"></path><path d="M60.5393 18.2695C60.5393 19.6244 59.3346 20.7227 57.8486 20.7227C56.3625 20.7227 55.1579 19.6244 55.1579 18.2695C55.1579 16.9146 56.3625 15.8162 57.8486 15.8162C59.3346 15.8162 60.5393 16.9146 60.5393 18.2695Z" fill="#3FDCF7"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M9.51003 11.3122C9.51003 8.87129 8.9224 7.71352 10.4884 6.27983H28.1853C30.315 6.85858 34.6398 8.58047 34.9019 10.838C35.295 11.9674 35.2841 14.4936 35.2295 15.6155C35.1749 15.7561 34.9346 16.2749 34.4104 17.2255C33.8862 18.176 32.3354 19.2512 31.6255 19.67L30.1511 20.0889V20.4674C32.248 20.4674 33.4275 21.8224 33.7551 22.4999C35.1967 24.091 35.1203 26.2226 34.9019 27.0895V28.7724C33.9845 31.0978 32.9907 32.3773 32.6084 32.7264L30.1511 34.4169L27.8577 35.8312L13.5781 35.8308L5.41457 35.8312C3.44875 32.1931 5.46917 30.9983 6.72511 30.8557H10.4884L13.5781 11.3122H9.51003ZM17.0457 30.8557L18.3562 23.7238H25.5642C27.0058 23.7238 27.6939 24.9477 27.8577 25.5597V28.1604C27.5847 29.0588 26.3506 30.8557 23.5984 30.8557H17.0457ZM25.5642 17.9103H19.3391L20.5546 11.7908H26.2195C26.984 11.7908 28.513 12.2203 28.513 13.9383V15.4625C28.4037 16.2784 27.6611 17.9103 25.5642 17.9103Z" fill="#3FDCF7"></path></svg></a></div><div class="navbar-sidebar__items"><div class="navbar-sidebar__item menu w-full"><ul class="menu__list with-hoverline"><div class="grid grid-cols-1 sm:grid-cols-2"><div><a class="navbar__item navbar__link text-[#1890ff] hover:text-[#1890ff] hover:no-underline cursor-default flex text-2xl font-semibold my-6">文档中心</a><div class="flex items-center ml-8"><div class="flex flex-col gap-2"><a class="flex items-center gap-4 hover:no-underline hover:bg-[#eeeef0] group transition rounded-lg p-4" href="/docs"><svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><g opacity="0.75"><path d="M17.3143 21.4187H14.6905C14.4474 21.4187 14.2539 21.2252 14.2539 20.982C14.2539 20.7389 14.4474 20.5454 14.6905 20.5454H17.3143C17.5574 20.5454 17.751 20.7389 17.751 20.982C17.751 21.2252 17.5574 21.4187 17.3143 21.4187Z" fill="url(#paint0_linear_1502_1678)"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M12.4266 6.72886C12.4266 8.69565 14.0333 10.3023 16.0045 10.3023C17.9713 10.3023 19.578 8.70456 19.578 6.72886C19.578 4.76208 17.9713 3.15986 16.0045 3.15986C14.0333 3.15986 12.4266 4.76208 12.4266 6.72886ZM13.3041 6.72892C13.3041 5.23917 14.5148 4.03747 16.0045 4.03747C17.4897 4.03747 18.7004 5.24815 18.7004 6.72892C18.7004 8.21415 17.4897 9.42929 16.0045 9.42929C14.5148 9.42929 13.3041 8.21415 13.3041 6.72892Z" fill="url(#paint1_linear_1502_1678)"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M3.13645 9.57766H9.13613C9.37924 9.57766 9.57279 9.38411 9.57279 9.14099V3.14131C9.57279 2.8982 9.37924 2.70465 9.13613 2.70465H3.13645C2.89334 2.70465 2.69978 2.8982 2.69978 3.14131V9.14099C2.69978 9.38411 2.89334 9.57766 3.13645 9.57766ZM8.69967 8.70457H3.57331V3.57821H8.69967V8.70457Z" fill="url(#paint2_linear_1502_1678)"></path><path d="M28.8674 3.5782H22.9626C22.7195 3.5782 22.5259 3.38465 22.5259 3.14154C22.5259 2.89842 22.7195 2.70487 22.9626 2.70487H28.8674C29.1105 2.70487 29.3041 2.89842 29.3041 3.14154C29.3041 3.38465 29.1061 3.5782 28.8674 3.5782Z" fill="url(#paint3_linear_1502_1678)"></path><path d="M22.9626 6.4898H28.8674C29.1061 6.4898 29.3041 6.29625 29.3041 6.05313C29.3041 5.81002 29.1105 5.61647 28.8674 5.61647H22.9626C22.7195 5.61647 22.5259 5.81002 22.5259 6.05313C22.5259 6.29625 22.7195 6.4898 22.9626 6.4898Z" fill="url(#paint4_linear_1502_1678)"></path><path d="M28.8674 9.39763H22.9626C22.7195 9.39763 22.5259 9.20408 22.5259 8.96096C22.5259 8.71339 22.7195 8.51983 22.9626 8.51983H28.8674C29.1105 8.51983 29.3041 8.71338 29.3041 8.96096C29.3041 9.20408 29.1061 9.39763 28.8674 9.39763Z" fill="url(#paint5_linear_1502_1678)"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M11.9127 23.7367H1.87681C0.841637 23.7367 0.00443699 22.8996 0.00443699 21.8688V1.87237C0.00443699 0.841658 0.84158 0 1.87681 0H30.1321C31.1628 0 32 0.837143 32 1.87237V21.8688C32 22.8995 31.1629 23.7367 30.1321 23.7367H20.0883C20.6365 25.216 21.895 26.9742 23.2777 27.6255C23.4306 27.6977 23.5253 27.8506 23.5253 28.0171V29.3718C23.5342 29.6149 23.3362 29.8084 23.0933 29.8084H8.91149C8.66837 29.8084 8.47482 29.6149 8.47482 29.3718V28.0171C8.47482 27.8506 8.57394 27.693 8.7224 27.6255C10.1057 26.9778 11.3648 25.2219 11.9127 23.7367ZM12.4817 22.8677H1.87681C1.32341 22.8677 0.882271 22.4223 0.882271 21.8732V19.1007H31.1222V21.8732C31.1222 22.4221 30.6813 22.8677 30.1321 22.8677H19.5188C19.5028 22.8668 19.4867 22.8668 19.4705 22.8677H12.5298C12.5136 22.8668 12.4976 22.8668 12.4817 22.8677ZM0.882271 18.2229H7.24732C7.93452 14.91 10.4461 12.2506 13.7362 11.3957C13.8668 11.3598 14.0108 11.3912 14.1233 11.4767C15.2081 12.3588 16.7878 12.3588 17.877 11.4767C17.985 11.3912 18.129 11.3598 18.2641 11.3957C21.563 12.2509 24.0749 14.9101 24.7581 18.2229H31.1222V1.88129C31.1222 1.32764 30.681 0.877606 30.1321 0.877606H1.87681C1.32316 0.877606 0.882271 1.32767 0.882271 1.88129V18.2229ZM23.8623 18.2229H8.14199C8.79282 15.3757 10.9403 13.0988 13.754 12.2913C15.0909 13.241 16.9136 13.241 18.2458 12.2913C21.0595 13.1028 23.2106 15.3833 23.8623 18.2229ZM12.8327 23.7367C12.3058 25.3941 10.9434 27.4049 9.34343 28.2873V28.9398H22.6567V28.2873C21.0653 27.4049 19.6954 25.3941 19.1639 23.7367H12.8327Z" fill="url(#paint6_linear_1502_1678)"></path><path d="M0.0125299 30.9737C0.0136461 30.9737 0.0145391 30.9735 0.0152088 30.9728V30.9692C0.0145391 30.9699 0.0136461 30.9706 0.0125299 30.971H0.00985096C0.00851152 30.971 0.00739526 30.9708 0.00627905 30.9701C0.00560931 30.969 0.00538607 30.9675 0.00538607 30.9657C0.00538607 30.9639 0.0056093 30.9628 0.00627905 30.9621C0.00739526 30.961 0.00851152 30.9603 0.00985096 30.9603H0.0125299C0.0136461 30.9603 0.0145391 30.961 0.0152088 30.9621V30.9585C0.0145391 30.9581 0.0136461 30.9576 0.0125299 30.9576C0.0118602 30.9572 0.0109672 30.9567 0.00985096 30.9567C0.00739497 30.9567 0.00538578 30.9576 0.00359982 30.9594C0.00181386 30.9612 0.000920885 30.9634 0.000920885 30.9657C0.000920885 30.9681 0.00181386 30.9701 0.00359982 30.9719C0.00538607 30.9733 0.00739526 30.9737 0.00985096 30.9737H0.0125299Z" fill="url(#paint7_linear_1502_1678)"></path><path d="M0.0272638 30.9648C0.0272638 30.9643 0.0259243 30.9639 0.0254778 30.9639C0.0241383 30.9639 0.0232454 30.9646 0.0227989 30.9657V30.9737H0.018334V30.9612H0.0227989V30.9639C0.0227989 30.9628 0.0230221 30.9621 0.0236919 30.9621C0.0241383 30.9617 0.0250314 30.9612 0.0263708 30.9612L0.0272638 30.9648Z" fill="url(#paint8_linear_1502_1678)"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0.0419421 30.9684C0.0419421 30.9666 0.0412724 30.9643 0.0401562 30.963C0.0388167 30.9619 0.0374772 30.9612 0.0356913 30.9612C0.0332356 30.9612 0.0314496 30.9619 0.0303334 30.963C0.0289939 30.9643 0.0285474 30.9657 0.0285474 30.9675C0.0285474 30.9692 0.0289939 30.9708 0.0303334 30.9719C0.0314496 30.9733 0.0332356 30.9737 0.0356913 30.9737H0.0383702C0.0394864 30.9737 0.0403794 30.9735 0.0410491 30.9728V30.9701C0.0405192 30.9701 0.0398494 30.9704 0.0390399 30.9708L0.0356913 30.971H0.0330123V30.9684H0.0419421ZM0.0365842 30.9648C0.0370307 30.9648 0.0374772 30.9655 0.0374772 30.9666H0.0330123V30.9648C0.0334588 30.9643 0.0343518 30.9639 0.0356913 30.9639C0.0361378 30.9639 0.0365842 30.9643 0.0365842 30.9648Z" fill="url(#paint9_linear_1502_1678)"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0.0562856 30.9666V30.9737H0.0527137V30.9719C0.0520439 30.9726 0.051151 30.9733 0.0500348 30.9737H0.0482488C0.0469093 30.9737 0.0457931 30.9735 0.0446769 30.9728C0.0440071 30.9724 0.0437839 30.9715 0.0437839 30.9701C0.0437839 30.9684 0.0440071 30.9672 0.0446769 30.9666C0.0457931 30.9661 0.047579 30.9657 0.0500348 30.9657H0.0527137C0.0527137 30.9652 0.0522672 30.9648 0.0518207 30.9648C0.051151 30.9643 0.050258 30.9639 0.0491418 30.9639H0.0464628C0.0457931 30.9639 0.0451233 30.9643 0.0446769 30.9648V30.9621C0.0454864 30.9618 0.0468258 30.9612 0.0473558 30.9612H0.0500348C0.0522672 30.9612 0.0538299 30.9619 0.0544996 30.963C0.0556159 30.9637 0.0562856 30.9648 0.0562856 30.9666ZM0.0500345 30.9684C0.0493647 30.9684 0.048695 30.9688 0.0482485 30.9692V30.971H0.0518204C0.0522669 30.9706 0.0527134 30.9697 0.0527134 30.9684H0.0500345Z" fill="url(#paint10_linear_1502_1678)"></path><path d="M0.0642666 30.9612V30.9576H0.0598017V30.9612H0.0580158V30.9639H0.0598017V30.9692C0.0598017 30.971 0.0600249 30.9724 0.0606947 30.9728C0.0618109 30.9735 0.0629271 30.9737 0.0642666 30.9737H0.0678385V30.971H0.0642666V30.9639H0.0678385V30.9612H0.0642666Z" fill="url(#paint11_linear_1502_1678)"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0.0830471 30.9675L0.0741173 30.9684V30.971H0.0794752C0.0802847 30.9707 0.0816241 30.9701 0.0821541 30.9701V30.9728C0.0814844 30.9735 0.0805914 30.9737 0.0794752 30.9737H0.0767962C0.0743405 30.9737 0.0725546 30.9733 0.0714383 30.9719C0.0700989 30.9708 0.0696524 30.9692 0.0696524 30.9675C0.0696524 30.9657 0.0700989 30.9643 0.0714383 30.963C0.0725546 30.9619 0.0743405 30.9612 0.0767962 30.9612C0.0785822 30.9612 0.0799216 30.9619 0.0812611 30.963C0.0823773 30.9643 0.0830471 30.9657 0.0830471 30.9675ZM0.0785822 30.9666C0.0785822 30.9655 0.0781357 30.9648 0.0776892 30.9648C0.0776892 30.9643 0.0772427 30.9639 0.0767962 30.9639C0.0754568 30.9639 0.0745637 30.9643 0.0741173 30.9648V30.9666H0.0785822Z" fill="url(#paint12_linear_1502_1678)"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0.0939861 30.9567V30.963C0.0939861 30.9625 0.0933163 30.9621 0.0922001 30.9621C0.0915304 30.9617 0.0908607 30.9612 0.0904142 30.9612C0.0886282 30.9612 0.0870655 30.9619 0.0859493 30.963C0.0852795 30.9643 0.0850563 30.9657 0.0850563 30.9675C0.0850563 30.9692 0.0852795 30.9708 0.0859493 30.9719C0.0870655 30.9733 0.0886282 30.9737 0.0904142 30.9737H0.0922001C0.0933163 30.9733 0.0939861 30.9726 0.0939861 30.9719V30.9737H0.098451V30.9567H0.0939861ZM0.0930931 30.9701C0.0930931 30.9708 0.0926466 30.971 0.0922001 30.971C0.0908607 30.971 0.0899676 30.9708 0.0895212 30.9701V30.9648C0.0899676 30.9643 0.0908607 30.9639 0.0922001 30.9639C0.0926466 30.9639 0.0930931 30.9643 0.0930931 30.9648C0.0935396 30.9654 0.0939861 30.9663 0.0939861 30.9675C0.0939861 30.9688 0.0935396 30.9697 0.0930931 30.9701Z" fill="url(#paint13_linear_1502_1678)"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0.114301 30.963C0.114301 30.9625 0.114525 30.9621 0.115194 30.9621C0.116004 30.9618 0.117343 30.9612 0.117873 30.9612C0.119659 30.9612 0.120775 30.9619 0.121445 30.963C0.122561 30.9643 0.123231 30.9657 0.123231 30.9675C0.123231 30.9692 0.122561 30.9708 0.121445 30.9719C0.120775 30.9733 0.119659 30.9737 0.117873 30.9737H0.115194H0.109836V30.9567H0.114301V30.963ZM0.116087 30.971C0.117204 30.971 0.117873 30.9708 0.117873 30.9701C0.11832 30.9697 0.118766 30.9688 0.118766 30.9675C0.118766 30.9663 0.11832 30.9654 0.117873 30.9648C0.117873 30.9643 0.117204 30.9639 0.116087 30.9639C0.115418 30.9639 0.114748 30.9643 0.114301 30.9648V30.9701C0.114748 30.9708 0.115418 30.971 0.116087 30.971Z" fill="url(#paint14_linear_1502_1678)"></path><path d="M0.128617 30.9612H0.124152L0.12951 30.9737C0.12951 30.9742 0.129063 30.9755 0.128617 30.9755H0.125938V30.9791H0.128617C0.129733 30.9791 0.130626 30.9786 0.131296 30.9782C0.131742 30.9775 0.132412 30.9764 0.133082 30.9746L0.13844 30.9612H0.133975L0.131296 30.9701L0.128617 30.9612Z" fill="url(#paint15_linear_1502_1678)"></path><path d="M0.14843 30.9567H0.153788L0.158253 30.9657L0.161825 30.9567H0.167182V30.9737H0.162718V30.9621L0.159146 30.9701H0.156467L0.152895 30.9621V30.9737H0.14843V30.9567Z" fill="url(#paint16_linear_1502_1678)"></path><path d="M0.174354 30.9612H0.170782V30.9684C0.170782 30.9701 0.171006 30.9717 0.171675 30.9728C0.172122 30.9735 0.173461 30.9737 0.175247 30.9737H0.177033L0.178819 30.9719V30.9737H0.183284V30.9612H0.178819V30.9675C0.178819 30.9688 0.178373 30.9697 0.177926 30.9701C0.177926 30.9708 0.17748 30.971 0.177033 30.971H0.175247C0.175247 30.971 0.174801 30.9699 0.174354 30.9692V30.9612Z" fill="url(#paint17_linear_1502_1678)"></path><path d="M0.199358 30.9737H0.194893V30.9648C0.194893 30.9643 0.193553 30.9639 0.193107 30.9639C0.192437 30.9639 0.191767 30.9643 0.191321 30.9648V30.9737H0.186856V30.9567H0.191321V30.963C0.191321 30.9625 0.191544 30.9621 0.192214 30.9621C0.19333 30.9617 0.194223 30.9612 0.194893 30.9612C0.196009 30.9612 0.196902 30.9619 0.197572 30.963C0.198688 30.9637 0.199358 30.9648 0.199358 30.9666V30.9737Z" fill="url(#paint18_linear_1502_1678)"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0.21451 30.9737V30.9666C0.21451 30.9648 0.213841 30.9637 0.212724 30.963C0.212055 30.9619 0.210492 30.9612 0.20826 30.9612H0.205581C0.205051 30.9612 0.204381 30.9615 0.203571 30.9618L0.202902 30.9648C0.203348 30.9643 0.204018 30.9639 0.204688 30.9639H0.207367C0.208483 30.9639 0.209376 30.9643 0.210046 30.9648C0.210492 30.9648 0.210938 30.9652 0.210938 30.9657H0.20826C0.205804 30.9657 0.204018 30.9661 0.202902 30.9666C0.202232 30.9672 0.202009 30.9684 0.202009 30.9701C0.202009 30.9715 0.202232 30.9724 0.202902 30.9728C0.204018 30.9735 0.205134 30.9737 0.206474 30.9737H0.20826C0.209376 30.9733 0.210269 30.9726 0.210938 30.9719V30.9737H0.21451ZM0.206473 30.9692C0.20692 30.9688 0.20759 30.9684 0.208259 30.9684H0.210938C0.210938 30.9697 0.210492 30.9706 0.210045 30.971H0.207366L0.206473 30.9692Z" fill="url(#paint19_linear_1502_1678)"></path><path d="M0.229691 30.9639C0.230138 30.9628 0.230807 30.9621 0.231477 30.9621C0.231924 30.9617 0.232593 30.9612 0.233263 30.9612C0.235049 30.9612 0.236165 30.9619 0.236835 30.963C0.237281 30.9637 0.237728 30.9648 0.237728 30.9666V30.9737H0.234156V30.9675C0.234156 30.967 0.233709 30.9655 0.233263 30.9648C0.233263 30.9643 0.232816 30.9639 0.23237 30.9639C0.2317 30.9639 0.23103 30.9643 0.230584 30.9648C0.229914 30.9655 0.229691 30.9663 0.229691 30.9675V30.9737H0.226119V30.9675C0.226119 30.9663 0.225673 30.9655 0.225226 30.9648C0.225226 30.9643 0.22478 30.9639 0.224333 30.9639C0.223663 30.9639 0.222994 30.9643 0.222547 30.9648V30.9737H0.218082V30.9612H0.222547V30.963C0.222547 30.9625 0.22277 30.9621 0.22344 30.9621C0.223887 30.9617 0.22478 30.9612 0.226119 30.9612C0.226566 30.9612 0.227235 30.9617 0.227905 30.9621C0.228352 30.9621 0.229021 30.9628 0.229691 30.9639Z" fill="url(#paint20_linear_1502_1678)"></path><path d="M0.254918 30.9621C0.254248 30.9621 0.253578 30.9628 0.253132 30.9639C0.252462 30.9628 0.251792 30.9621 0.251346 30.9621C0.250676 30.9617 0.250006 30.9612 0.24956 30.9612C0.24822 30.9612 0.247327 30.9617 0.246881 30.9621C0.246211 30.9621 0.245988 30.9625 0.245988 30.963V30.9612H0.241523V30.9737H0.245988V30.9648C0.246434 30.9643 0.247104 30.9639 0.247774 30.9639C0.24822 30.9639 0.248667 30.9643 0.248667 30.9648C0.249113 30.9655 0.24956 30.9663 0.24956 30.9675V30.9737H0.253132V30.9675C0.253132 30.9663 0.253355 30.9655 0.254025 30.9648C0.254471 30.9643 0.255141 30.9639 0.255811 30.9639C0.256257 30.9639 0.256704 30.9643 0.256704 30.9648C0.25715 30.9655 0.257597 30.9661 0.257597 30.9666V30.9737H0.261169V30.9666C0.261169 30.9648 0.260722 30.9637 0.260276 30.963C0.259606 30.9619 0.25849 30.9612 0.256704 30.9612C0.256034 30.9612 0.255364 30.9617 0.254918 30.9621Z" fill="url(#paint21_linear_1502_1678)"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0.276628 30.9666V30.9737H0.273056V30.9719C0.272387 30.9726 0.271494 30.9733 0.270377 30.9737H0.268591C0.267252 30.9737 0.266136 30.9735 0.26502 30.9728C0.26435 30.9724 0.264127 30.9715 0.264127 30.9701C0.264127 30.9684 0.26435 30.9672 0.26502 30.9666C0.266136 30.9661 0.267922 30.9657 0.270377 30.9657H0.273056C0.273056 30.9652 0.27261 30.9648 0.272163 30.9648C0.271494 30.9643 0.270601 30.9639 0.269484 30.9639H0.266805L0.26557 30.9643L0.26502 30.9621C0.265829 30.9618 0.267169 30.9612 0.267698 30.9612H0.270377C0.27261 30.9612 0.274173 30.9619 0.274842 30.963C0.275959 30.9637 0.276628 30.9648 0.276628 30.9666ZM0.270377 30.9684C0.269707 30.9684 0.269038 30.9688 0.268591 30.9692V30.971H0.272163C0.27261 30.9706 0.273056 30.9697 0.273056 30.9684H0.270377Z" fill="url(#paint22_linear_1502_1678)"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0.288209 30.9567V30.963C0.288209 30.9625 0.287539 30.9621 0.286423 30.9621C0.285753 30.9617 0.285084 30.9612 0.284637 30.9612C0.282851 30.9612 0.281288 30.9619 0.280172 30.963C0.279503 30.9643 0.279279 30.9657 0.279279 30.9675C0.279279 30.9692 0.279503 30.9708 0.280172 30.9719C0.281288 30.9733 0.282851 30.9737 0.284637 30.9737H0.286423C0.287539 30.9733 0.288209 30.9726 0.288209 30.9719V30.9737H0.292674V30.9567H0.288209ZM0.287316 30.9701C0.287316 30.9708 0.28687 30.971 0.286423 30.971C0.285084 30.971 0.284191 30.9708 0.283744 30.9701V30.9648C0.284191 30.9643 0.285084 30.9639 0.286423 30.9639C0.28687 30.9639 0.287316 30.9643 0.287316 30.9648C0.287763 30.9654 0.288209 30.9663 0.288209 30.9675C0.288209 30.9688 0.287763 30.9697 0.287316 30.9701Z" fill="url(#paint23_linear_1502_1678)"></path><path d="M0.315668 30.9576V30.9612C0.314998 30.9608 0.314105 30.9603 0.312989 30.9603H0.31031C0.309641 30.9603 0.308971 30.9608 0.308524 30.9612C0.307855 30.9612 0.307631 30.9617 0.307631 30.9621L0.308971 30.9634L0.31031 30.9639H0.312096C0.313882 30.9639 0.314998 30.9646 0.315668 30.9657C0.316115 30.9663 0.316561 30.9672 0.316561 30.9683C0.316561 30.9701 0.315891 30.9717 0.314775 30.9728C0.314105 30.9735 0.312543 30.9737 0.31031 30.9737H0.306738C0.306069 30.9737 0.305176 30.9735 0.304059 30.9728V30.9692L0.306738 30.971H0.312096C0.312543 30.9706 0.312989 30.9699 0.312989 30.9692C0.313237 30.9694 0.312989 30.969 0.312989 30.9692L0.312096 30.9683C0.312096 30.9679 0.311427 30.9675 0.31031 30.9675H0.308524C0.306738 30.967 0.305399 30.9663 0.304952 30.9657C0.304283 30.9646 0.304059 30.9634 0.304059 30.9621C0.304059 30.9603 0.304506 30.9592 0.305845 30.9585C0.306962 30.9574 0.308524 30.9567 0.31031 30.9567L0.312096 30.9576H0.315668Z" fill="url(#paint24_linear_1502_1678)"></path><path d="M0.328421 30.9737H0.332886V30.9666C0.332886 30.9648 0.332216 30.9637 0.3311 30.963C0.33043 30.9619 0.329537 30.9612 0.328421 30.9612C0.327751 30.9612 0.326858 30.9617 0.325742 30.9621C0.325072 30.9621 0.324849 30.9625 0.324849 30.963V30.9567H0.320384V30.9737H0.324849V30.9648C0.325296 30.9643 0.325965 30.9639 0.326635 30.9639C0.327082 30.9639 0.327528 30.9643 0.327528 30.9648L0.328421 30.9666V30.9737Z" fill="url(#paint25_linear_1502_1678)"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0.347788 30.9666V30.9737H0.344216V30.9719C0.343546 30.9726 0.342653 30.9733 0.341537 30.9737H0.339751C0.338411 30.9737 0.337295 30.9735 0.336179 30.9728C0.335509 30.9724 0.335286 30.9715 0.335286 30.9701C0.335286 30.9684 0.335509 30.9672 0.336179 30.9666C0.337295 30.9661 0.339081 30.9657 0.341537 30.9657H0.344216C0.344216 30.9652 0.343769 30.9648 0.343323 30.9648C0.342653 30.9643 0.34176 30.9639 0.340644 30.9639H0.337965L0.336179 30.9648V30.9621C0.337295 30.9617 0.338188 30.9612 0.338858 30.9612H0.341537C0.343769 30.9612 0.345332 30.9619 0.346002 30.963C0.347118 30.9637 0.347788 30.9648 0.347788 30.9666ZM0.340652 30.9686L0.33975 30.9692V30.971H0.343322C0.343769 30.9706 0.344215 30.9697 0.344215 30.9684L0.340652 30.9686Z" fill="url(#paint26_linear_1502_1678)"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0.356717 30.9621C0.356048 30.9621 0.355824 30.9625 0.355824 30.963V30.9567H0.351359V30.9737H0.355824H0.359396C0.361182 30.9737 0.362298 30.9733 0.362968 30.9719C0.364084 30.9708 0.364754 30.9692 0.364754 30.9675C0.364754 30.9657 0.364084 30.9643 0.362968 30.963C0.362298 30.9619 0.361182 30.9612 0.359396 30.9612L0.358206 30.9615L0.356717 30.9621ZM0.359396 30.9701C0.359396 30.9708 0.358727 30.971 0.35761 30.971C0.356941 30.971 0.356271 30.9708 0.355824 30.9701V30.9648L0.356791 30.9641C0.357907 30.9641 0.359396 30.9643 0.359396 30.9648C0.359843 30.9654 0.360289 30.9663 0.360289 30.9675C0.360289 30.9688 0.359843 30.9697 0.359396 30.9701Z" fill="url(#paint27_linear_1502_1678)"></path><path d="M0.376614 30.9648C0.376614 30.9643 0.375275 30.9639 0.374828 30.9639C0.373489 30.9639 0.372596 30.9646 0.372149 30.9657V30.9737H0.367684V30.9612H0.372149V30.9639C0.372149 30.9628 0.372372 30.9621 0.373042 30.9621C0.373489 30.9617 0.374382 30.9612 0.375721 30.9612L0.376614 30.9648Z" fill="url(#paint28_linear_1502_1678)"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0.390232 30.9737V30.9666C0.390232 30.9648 0.389562 30.9637 0.388446 30.963C0.387776 30.9619 0.386214 30.9612 0.383981 30.9612H0.381302L0.379676 30.9617L0.378623 30.9621V30.9648C0.37907 30.9643 0.379739 30.9639 0.380409 30.9639H0.383088C0.384204 30.9639 0.385097 30.9643 0.385767 30.9648C0.386214 30.9648 0.38666 30.9652 0.38666 30.9657H0.383981C0.381525 30.9657 0.379739 30.9661 0.378623 30.9666C0.377954 30.9672 0.37773 30.9684 0.37773 30.9701C0.37773 30.9715 0.377953 30.9724 0.378623 30.9728C0.379739 30.9735 0.380856 30.9737 0.382195 30.9737H0.383981C0.385097 30.9733 0.38599 30.9726 0.38666 30.9719V30.9737H0.390232ZM0.38338 30.9685L0.38666 30.9684C0.38666 30.9697 0.386213 30.9706 0.385767 30.971H0.383088L0.382195 30.9701C0.382506 30.9698 0.382927 30.9686 0.38338 30.9685Z" fill="url(#paint29_linear_1502_1678)"></path><path d="M0.393804 30.9612H0.398269V30.9737H0.393804V30.9612Z" fill="url(#paint30_linear_1502_1678)"></path><path d="M0.393804 30.9567H0.398269V30.9594H0.393804V30.9567Z" fill="url(#paint31_linear_1502_1678)"></path><path d="M0.411468 30.9612H0.401645L0.401646 30.9639H0.407004L0.400752 30.971V30.9737H0.411468V30.971H0.405217L0.411468 30.9639V30.9612Z" fill="url(#paint32_linear_1502_1678)"></path><path d="M0.00982277 30.9793V30.982H0.00625086V30.9838H0.00982277V30.9864H0.00625086V30.9963H0.00267894V30.9864H0V30.9838H0.00267894C0.00267894 30.9826 0.00290218 30.9809 0.00357192 30.9802C0.00401841 30.9797 0.00535788 30.9793 0.00714384 30.9793H0.00982277Z" fill="url(#paint33_linear_1502_1678)"></path><path d="M0.0196735 30.9873L0.0205664 30.9838C0.019227 30.9838 0.017441 30.9842 0.0169945 30.9846C0.0163248 30.9846 0.0161015 30.9853 0.0161015 30.9864V30.9838H0.0116366V30.9963H0.0161015V30.9882C0.0165481 30.9871 0.017441 30.9864 0.0187805 30.9864C0.0192269 30.9864 0.0196735 30.9869 0.0196735 30.9873Z" fill="url(#paint34_linear_1502_1678)"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0.0289939 30.9838C0.0307799 30.9838 0.0321193 30.9844 0.0334588 30.9855C0.034575 30.9869 0.0352448 30.9882 0.0352448 30.99C0.0352448 30.9918 0.034575 30.9934 0.0334588 30.9945C0.0321193 30.9958 0.0307799 30.9963 0.0289939 30.9963C0.0265382 30.9963 0.0247523 30.9958 0.023636 30.9945C0.0222965 30.9934 0.0218501 30.9918 0.0218501 30.99C0.0218501 30.9882 0.0222966 30.9869 0.023636 30.9855C0.0247523 30.9844 0.0265382 30.9838 0.0289939 30.9838ZM0.0289939 30.9864C0.0276545 30.9864 0.0267614 30.9869 0.026315 30.9873V30.9927C0.0267614 30.9934 0.0276545 30.9936 0.0289939 30.9936C0.0294404 30.9936 0.0301101 30.9934 0.0307799 30.9927C0.0312264 30.9922 0.0316729 30.9913 0.0316729 30.99C0.0316729 30.9889 0.0312264 30.988 0.0307799 30.9873C0.0301101 30.9869 0.0294404 30.9864 0.0289939 30.9864Z" fill="url(#paint35_linear_1502_1678)"></path><path d="M0.0515696 30.9846C0.0508998 30.9846 0.0502301 30.9853 0.0497836 30.9864C0.0491139 30.9853 0.0484442 30.9846 0.0479976 30.9846C0.0473279 30.9842 0.0466582 30.9838 0.0462117 30.9838C0.0448722 30.9838 0.0439792 30.9842 0.0435327 30.9846C0.042863 30.9846 0.0426398 30.9851 0.0426398 30.9855V30.9838H0.0381749V30.9963H0.0426398V30.9873C0.0430863 30.9869 0.043756 30.9864 0.0444257 30.9864C0.0448722 30.9864 0.0453187 30.9869 0.0453187 30.9873C0.0457652 30.988 0.0462117 30.9889 0.0462117 30.99V30.9963H0.0497836V30.99C0.0497836 30.9889 0.0500068 30.988 0.0506766 30.9873C0.051123 30.9869 0.0517928 30.9864 0.0524625 30.9864C0.052909 30.9864 0.0533555 30.9869 0.0533555 30.9873C0.053802 30.988 0.0542485 30.9887 0.0542485 30.9891V30.9963H0.0578204V30.9891C0.0578204 30.9873 0.057374 30.9862 0.0569274 30.9855C0.0562577 30.9844 0.0551415 30.9838 0.0533555 30.9838C0.0526858 30.9838 0.0520161 30.9842 0.0515696 30.9846Z" fill="url(#paint36_linear_1502_1678)"></path><path d="M0.073894 30.9802V30.9838H0.077466V30.9864H0.073894V30.9936H0.077466V30.9963H0.073894C0.0725545 30.9963 0.0714383 30.996 0.0703221 30.9954C0.0696524 30.9949 0.0694291 30.9936 0.0694291 30.9918V30.9864H0.0676432V30.9838H0.0694291V30.9802H0.073894Z" fill="url(#paint37_linear_1502_1678)"></path><path d="M0.0926187 30.9963V30.9891C0.0926187 30.9873 0.091949 30.9862 0.0908327 30.9855C0.090163 30.9844 0.08927 30.9838 0.0881538 30.9838C0.0876238 30.9838 0.0869541 30.984 0.0861446 30.9844C0.0854748 30.9844 0.0845819 30.9851 0.0845819 30.9855V30.9793H0.080117V30.9963H0.0845819V30.9873C0.0850284 30.9869 0.0856981 30.9864 0.0863679 30.9864C0.0868144 30.9864 0.0872608 30.9869 0.0872608 30.9873L0.0881538 30.9891V30.9963H0.0926187Z" fill="url(#paint38_linear_1502_1678)"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0.108748 30.99L0.0998183 30.9909V30.9936H0.105176C0.105986 30.9932 0.107325 30.9927 0.107855 30.9927V30.9954C0.107185 30.996 0.106292 30.9963 0.105176 30.9963H0.102497C0.100042 30.9963 0.0982556 30.9958 0.0971394 30.9945C0.0957999 30.9934 0.0953535 30.9918 0.0953535 30.99C0.0953535 30.9882 0.0957999 30.9869 0.0971394 30.9855C0.0982556 30.9844 0.100042 30.9838 0.102497 30.9838C0.104283 30.9838 0.105623 30.9844 0.106962 30.9855C0.108078 30.9869 0.108748 30.9882 0.108748 30.99ZM0.104283 30.9891C0.104283 30.988 0.103837 30.9873 0.10339 30.9873C0.10339 30.9869 0.102944 30.9864 0.102497 30.9864C0.101158 30.9864 0.100265 30.9869 0.0998183 30.9873V30.9891H0.104283Z" fill="url(#paint39_linear_1502_1678)"></path><path d="M0.129929 30.9909L0.123678 30.9793H0.119213L0.119213 30.9963H0.123678V30.9847L0.129036 30.9963H0.134394V30.9793H0.129929V30.9909Z" fill="url(#paint40_linear_1502_1678)"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0.144439 30.9838C0.146225 30.9838 0.147565 30.9844 0.148904 30.9855C0.150021 30.9869 0.15069 30.9882 0.15069 30.99C0.15069 30.9918 0.150021 30.9934 0.148904 30.9945C0.147565 30.9958 0.146225 30.9963 0.144439 30.9963C0.141984 30.9963 0.140198 30.9958 0.139082 30.9945C0.137742 30.9934 0.137296 30.9918 0.137296 30.99C0.137296 30.9882 0.137742 30.9869 0.139082 30.9855C0.140198 30.9844 0.141984 30.9838 0.144439 30.9838ZM0.144439 30.9864C0.1431 30.9864 0.142207 30.9869 0.14176 30.9873V30.9927C0.142207 30.9934 0.1431 30.9936 0.144439 30.9936C0.144886 30.9936 0.145556 30.9934 0.146225 30.9927C0.146672 30.9922 0.147118 30.9913 0.147118 30.99C0.147118 30.9889 0.146672 30.988 0.146225 30.9873C0.145556 30.9869 0.144886 30.9864 0.144439 30.9864Z" fill="url(#paint41_linear_1502_1678)"></path><path d="M0.157192 30.9838H0.15362V30.9909C0.15362 30.9927 0.153844 30.9942 0.154513 30.9954C0.15496 30.996 0.156299 30.9963 0.158085 30.9963H0.159871L0.161657 30.9945V30.9963H0.166122V30.9838H0.161657V30.99C0.161657 30.9913 0.161211 30.9922 0.160764 30.9927C0.160764 30.9934 0.160318 30.9936 0.159871 30.9936H0.158085C0.158085 30.9936 0.157639 30.9925 0.157192 30.9918V30.9838Z" fill="url(#paint42_linear_1502_1678)"></path><path d="M0.182196 30.9891V30.9963H0.177731V30.9873C0.177731 30.9869 0.176391 30.9864 0.175945 30.9864C0.175275 30.9864 0.174605 30.9869 0.174159 30.9873V30.9963H0.169694V30.9838H0.174159V30.9855C0.174159 30.9851 0.174382 30.9846 0.175052 30.9846C0.175861 30.9843 0.177201 30.9838 0.177731 30.9838C0.178847 30.9838 0.17974 30.9844 0.18041 30.9855C0.181526 30.9862 0.182196 30.9873 0.182196 30.9891Z" fill="url(#paint43_linear_1502_1678)"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0.200697 30.9793H0.193553V30.9963H0.198018V30.9909H0.200697C0.20293 30.9909 0.204492 30.9907 0.205162 30.99C0.206278 30.9889 0.206948 30.9873 0.206948 30.9855C0.206948 30.9838 0.206278 30.9824 0.205162 30.9811C0.204492 30.98 0.20293 30.9793 0.200697 30.9793ZM0.198018 30.9873V30.9829H0.200697C0.201144 30.9829 0.201813 30.9833 0.202483 30.9838C0.20293 30.9838 0.203376 30.9844 0.203376 30.9855C0.203376 30.9862 0.20293 30.9869 0.202483 30.9873H0.198018Z" fill="url(#paint44_linear_1502_1678)"></path><path d="M0.218808 30.9873C0.218808 30.9869 0.217468 30.9864 0.217022 30.9864C0.215682 30.9864 0.214789 30.9871 0.214343 30.9882V30.9963H0.209878V30.9838H0.214343V30.9864C0.214343 30.9853 0.214566 30.9846 0.215236 30.9846C0.215682 30.9842 0.216575 30.9838 0.217915 30.9838L0.218808 30.9873Z" fill="url(#paint45_linear_1502_1678)"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0.2317 30.9855C0.230361 30.9844 0.229021 30.9838 0.227235 30.9838C0.22478 30.9838 0.222994 30.9844 0.221877 30.9855C0.220538 30.9869 0.220092 30.9882 0.220092 30.99C0.220092 30.9918 0.220538 30.9934 0.221877 30.9945C0.222994 30.9958 0.22478 30.9963 0.227235 30.9963C0.229021 30.9963 0.230361 30.9958 0.2317 30.9945C0.232816 30.9934 0.233486 30.9918 0.233486 30.99C0.233486 30.9882 0.232816 30.9869 0.2317 30.9855ZM0.224556 30.9873C0.225003 30.9869 0.225896 30.9864 0.227235 30.9864C0.227682 30.9864 0.228352 30.9869 0.229021 30.9873C0.229468 30.988 0.229914 30.9889 0.229914 30.99C0.229914 30.9913 0.229468 30.9922 0.229021 30.9927C0.228352 30.9934 0.227682 30.9936 0.227235 30.9936C0.225896 30.9936 0.225003 30.9934 0.224556 30.9927V30.9873Z" fill="url(#paint46_linear_1502_1678)"></path><path d="M0.236416 30.9838H0.240881V30.9963C0.240881 30.9974 0.240211 30.9985 0.239095 30.9998C0.238425 31.0009 0.237309 31.0016 0.235523 31.0016H0.233737V30.998H0.235523C0.23597 30.998 0.236416 30.9974 0.236416 30.9963V30.9838Z" fill="url(#paint47_linear_1502_1678)"></path><path d="M0.236416 30.9793H0.240881V30.982H0.236416V30.9793Z" fill="url(#paint48_linear_1502_1678)"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0.256759 30.9909C0.256759 30.9891 0.25609 30.9869 0.254974 30.9855C0.253634 30.9844 0.252295 30.9838 0.250509 30.9838C0.248053 30.9838 0.246267 30.9844 0.245151 30.9855C0.243811 30.9869 0.243365 30.9882 0.243365 30.99C0.243365 30.9918 0.243811 30.9934 0.245151 30.9945C0.246267 30.9958 0.248053 30.9963 0.250509 30.9963H0.253188C0.254304 30.9963 0.255197 30.996 0.255866 30.9954V30.9927C0.255337 30.9927 0.254667 30.993 0.253857 30.9933L0.250509 30.9936H0.24783V30.9909H0.256759ZM0.251402 30.9873C0.251848 30.9873 0.252295 30.988 0.252295 30.9891H0.24783V30.9873C0.248276 30.9869 0.249169 30.9864 0.250509 30.9864C0.250955 30.9864 0.251402 30.9869 0.251402 30.9873Z" fill="url(#paint49_linear_1502_1678)"></path><path d="M0.269233 30.9846V30.9873H0.267447C0.267447 30.9869 0.266778 30.9864 0.265661 30.9864C0.264992 30.9864 0.264322 30.9869 0.263875 30.9873C0.263206 30.988 0.262982 30.9889 0.262982 30.99C0.262982 30.9913 0.263206 30.9922 0.263875 30.9927C0.264322 30.9934 0.264992 30.9936 0.265661 30.9936H0.26834L0.269233 30.9927V30.9963H0.265661C0.263206 30.9963 0.26142 30.9958 0.260303 30.9945C0.258964 30.9934 0.258518 30.9918 0.258518 30.99C0.258518 30.9882 0.258964 30.9869 0.260303 30.9855C0.26142 30.9844 0.263206 30.9838 0.265661 30.9838H0.267447C0.267894 30.9838 0.268564 30.9842 0.269233 30.9846Z" fill="url(#paint50_linear_1502_1678)"></path><path d="M0.277242 30.9838V30.9802H0.272777V30.9838H0.270991V30.9864H0.272777V30.9918C0.272777 30.9936 0.273001 30.9949 0.27367 30.9954C0.274786 30.996 0.275903 30.9963 0.277242 30.9963H0.280814V30.9936H0.277242V30.9864H0.280814V30.9838H0.277242Z" fill="url(#paint51_linear_1502_1678)"></path></g><defs><linearGradient id="paint0_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint1_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint2_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint3_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint4_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint5_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint6_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint7_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint8_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint9_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint10_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint11_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint12_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint13_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint14_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint15_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint16_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint17_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint18_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint19_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint20_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint21_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint22_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint23_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint24_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint25_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint26_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint27_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint28_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint29_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint30_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint31_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint32_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint33_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint34_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint35_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint36_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint37_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint38_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint39_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint40_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint41_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint42_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint43_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint44_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint45_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint46_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint47_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint48_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint49_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint50_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint51_linear_1502_1678" x1="16" y1="0" x2="16" y2="31.0016" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient></defs></svg><span class="text-[#242436]">小记</span></a><a class="flex items-center gap-4 hover:no-underline hover:bg-[#eeeef0] group transition rounded-lg p-4" href="/docs/basics"><svg width="32" height="33" viewBox="0 0 32 33" fill="none" xmlns="http://www.w3.org/2000/svg"><g opacity="0.75"><path d="M31.0436 4.63474H18.7217C18.2068 4.63474 17.7655 5.03935 17.7655 5.591V9.19554C17.7655 9.7841 18.3171 10.1518 18.7954 10.1151C19.8989 10.0414 20.5608 10.5197 20.7814 11.2186C21.2597 12.5794 19.9722 13.7196 18.8687 13.4256C18.2802 13.2786 17.7286 13.6832 17.7286 14.2715V17.7657H14.2344C13.6458 17.7657 13.2045 18.3173 13.3885 18.9059C13.6827 20.0094 12.5425 21.2599 11.1814 20.8186C10.5562 20.5979 10.0779 20.0094 10.0779 19.2001C10.0779 18.8322 10.1515 18.5749 9.93089 18.2806C9.74693 17.9863 9.48959 17.8024 9.15835 17.8024H5.55381C5.03888 17.8024 4.59755 18.207 4.59755 18.7586V31.1173C4.59755 31.6322 5.00217 32.0735 5.55381 32.0735H31.0435C31.5584 32.0735 31.9997 31.6689 31.9997 31.1173L32 5.62757C32 5.03926 31.5954 4.63466 31.0435 4.63466L31.0436 4.63474ZM21.9953 11.7704C21.9953 10.3359 20.8918 8.93813 18.8687 8.97504V5.70121H30.8963V17.7288H27.7697C27.5121 16.4047 26.3353 15.4115 24.9008 15.4115C23.4663 15.4115 22.2891 16.4047 22.0318 17.7288H18.8686V14.5289C20.3397 14.7862 21.9952 13.5357 21.9952 11.7703L21.9953 11.7704ZM18.0229 26.7037C17.177 26.5567 16.5517 25.8209 16.5517 24.9014C16.5517 23.9818 17.177 23.2463 18.0229 23.099C18.5011 23.0254 18.8688 22.5841 18.8688 22.1058V18.869H22.1056C22.6206 18.869 23.0252 18.5011 23.0988 18.0231C23.2458 17.1772 23.9816 16.5519 24.9012 16.5519C25.8207 16.5519 26.5563 17.1772 26.7035 18.0231C26.7772 18.5013 27.1818 18.869 27.6967 18.869H30.8966V30.8966L18.869 30.8968V27.6969C18.869 27.2187 18.5011 26.7771 18.0231 26.7037L18.0229 26.7037ZM11.7701 21.9957C13.5355 21.9957 14.7863 20.3406 14.5287 18.8691H17.7655V22.0323C16.4414 22.2899 15.4482 23.4668 15.4482 24.9013C15.4482 26.3358 16.4414 27.5129 17.7655 27.7703V30.8968H5.73794V18.8692H9.0115C8.93787 20.8556 10.2987 21.9958 11.7701 21.9958L11.7701 21.9957Z" fill="url(#paint0_linear_1502_730)"></path><path d="M4.22976 14.2348C4.48735 15.5589 5.66424 16.5521 7.09873 16.5521C8.53321 16.5521 9.71035 15.5589 9.96769 14.2348H13.3149C13.8298 14.2348 14.2711 13.8301 14.2711 13.2785V9.9313C15.5953 9.6737 16.5885 8.49682 16.5885 7.06233C16.5885 5.62785 15.5953 4.4507 14.2711 4.19336V0.956513C14.2711 0.441584 13.8665 0.000256568 13.3149 0.000256568L0.956257 0C0.441327 0 0 0.404611 0 0.956257V13.3149C0 13.8298 0.404611 14.2711 0.956257 14.2711L4.22976 14.2348ZM15.4482 7.09911C15.4482 8.01865 14.8229 8.75422 13.977 8.90148C13.4988 8.97511 13.1311 9.41641 13.1311 9.89465V13.1315H9.89426C9.37933 13.1315 8.97472 13.4994 8.90109 13.9774C8.75408 14.8233 8.01827 15.4485 7.09873 15.4485C6.17918 15.4485 5.44362 14.8233 5.29636 13.9774C5.22272 13.4992 4.81812 13.1315 4.30319 13.1315L1.10325 13.1312V1.10365H13.1308V4.30358C13.1308 4.81851 13.4988 5.22312 13.9768 5.29675C14.8227 5.40708 15.4482 6.17957 15.4482 7.09911Z" fill="url(#paint1_linear_1502_730)"></path></g><defs><linearGradient id="paint0_linear_1502_730" x1="16" y1="0" x2="16" y2="32.0735" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient><linearGradient id="paint1_linear_1502_730" x1="16" y1="0" x2="16" y2="32.0735" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient></defs></svg><span class="text-[#242436]">基础</span></a><a class="flex items-center gap-4 hover:no-underline hover:bg-[#eeeef0] group transition rounded-lg p-4" href="/docs/devOps"><svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><g opacity="0.75"><path d="M17.6851 10.6108C17.6851 11.6913 16.8 12.5672 15.7082 12.5672C14.6163 12.5672 13.7312 11.6913 13.7312 10.6108C13.7312 9.53025 14.6163 8.65432 15.7082 8.65432C16.8 8.65432 17.6851 9.53025 17.6851 10.6108Z" fill="#1890FF"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M13.0872 8.07679C13.7824 7.38857 14.725 7.00133 15.7083 7C16.6916 7.00133 17.6343 7.38857 18.3295 8.07679C19.0247 8.76501 19.4157 9.69802 19.4167 10.6711V21.3301C19.4167 22.3034 19.026 23.2369 18.3305 23.9251C17.6351 24.6133 16.6918 25 15.7083 25C14.7248 25 13.7816 24.6133 13.0861 23.9251C12.3907 23.2369 12 22.3034 12 21.3301V10.6711C12.001 9.69802 12.392 8.76501 13.0872 8.07679ZM17.5456 8.85287C17.0584 8.37063 16.3975 8.09971 15.7083 8.09971C15.3671 8.09971 15.0292 8.16623 14.714 8.29545C14.3987 8.42468 14.1123 8.61409 13.871 8.85287C13.6297 9.09165 13.4383 9.37512 13.3078 9.6871C13.1772 9.99908 13.11 10.3335 13.11 10.6711V21.3301C13.11 22.0121 13.3837 22.6661 13.871 23.1484C14.3583 23.6306 15.0192 23.9015 15.7083 23.9015C16.3975 23.9015 17.0584 23.6306 17.5456 23.1484C18.0329 22.6661 18.3067 22.0121 18.3067 21.3301V10.6711C18.3067 9.98916 18.0329 9.3351 17.5456 8.85287Z" fill="#1890FF"></path></g><circle opacity="0.75" cx="16" cy="16" r="15.3333" stroke="url(#paint0_linear_1520_2185)" stroke-width="1.33333"></circle><defs><linearGradient id="paint0_linear_1520_2185" x1="16" y1="0" x2="16" y2="32" gradientUnits="userSpaceOnUse"><stop stop-color="#3FDCF7"></stop><stop offset="1" stop-color="#1890FF"></stop></linearGradient></defs></svg><span class="text-[#242436]">运维</span></a></div></div></div><div><li class="menu__list-item"><a class="menu__link text-[#1890ff] hover:text-[#1890ff] hover:underline cursor-pointer flex text-2xl font-semibold my-6" href="/website">导航</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link text-[#1890ff] hover:text-[#1890ff] hover:underline cursor-pointer flex text-2xl font-semibold my-6 menu__link--active" href="/blog">博客</a></li><ul class="social-icons gap-4 flex list-none px-0"><li class="menu__list-item"><a href="https://github.com/jzw777/Poseidon" target="_blank" rel="noopener noreferrer" class="menu__link header-icon-link header-github-link"></a></li><li class="menu__list-item"><a href="https://discord.gg/fVabfAQGdr" target="_blank" rel="noopener noreferrer" class="menu__link header-icon-link header-discord-link"></a></li></ul><div class="h-44 visible sm:hidden"></div></div></div></ul></div><div class="navbar-sidebar__item menu w-full"><button type="button" class="clean-btn navbar-sidebar__back pl-0 mb-4 ml-2.5 w-[calc(100%-20px)] flex items-center border-y border-y-[#9696B4] border-solid border-x-0"><svg aria-hidden="true" class="w-7 h-7" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> Return to main menu</button></div></div></div></nav><div class="main-wrapper mainWrapper_eExm"><div class="margin-vert--lg container max-w-[1040px]"><div class="flex flex-row flex-wrap lg:flex-nowrap lg:gap-4"><div class="w-full lg:w-1/4"><div class="blog-post-item-shadow rounded-[10px] p-4"><figcaption class="flex flex-col items-center"><a itemprop="url" href="/blog/author/lizejiao"><img src="https://lizejiao.github.io/img/head.jpg" alt="李苟蛋" loading="lazy" class="flex h-[120px] w-[120px] rounded-full object-cover"></a><div class="mt-2 text-center"><a itemprop="url" class="text-sm font-semibold text-inherit" href="/blog/author/lizejiao">李苟蛋</a><div class="-mt-0.5 text-xs text-[#9696B4]">JAVA Developer</div></div></figcaption></div><br><div class="tableOfContents_bqdL thin-scrollbar custom-table-of-contents blog-post-item-shadow rounded-[10px]"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#redis数据结构" class="table-of-contents__link toc-highlight">Redis数据结构</a><ul><li><a href="#常用数据结构及命令" class="table-of-contents__link toc-highlight">常用数据结构及命令</a></li><li><a href="#hash结构常用操作" class="table-of-contents__link toc-highlight">Hash结构常用操作</a></li><li><a href="#list常用操作" class="table-of-contents__link toc-highlight">List常用操作</a></li><li><a href="#set常用操作" class="table-of-contents__link toc-highlight">Set常用操作</a></li><li><a href="#zset常用操作" class="table-of-contents__link toc-highlight">ZSet常用操作</a></li></ul></li><li><a href="#redis常讨论的问题" class="table-of-contents__link toc-highlight">Redis常讨论的问题</a></li><li><a href="#其他高级命令" class="table-of-contents__link toc-highlight">其他高级命令</a></li><li><a href="#redis持久化" class="table-of-contents__link toc-highlight">Redis持久化</a><ul><li><a href="#rdb快照snapshot" class="table-of-contents__link toc-highlight">RDB快照(snapshot)</a></li><li><a href="#aofappend-only-file" class="table-of-contents__link toc-highlight">AOF(append-only file)</a></li><li><a href="#redis-40-混合持久化" class="table-of-contents__link toc-highlight">Redis 4.0 混合持久化</a></li></ul></li><li><a href="#redis主从架构" class="table-of-contents__link toc-highlight">Redis主从架构</a></li><li><a href="#jedis连接代码示例" class="table-of-contents__link toc-highlight">Jedis连接代码示例</a></li><li><a href="#redis哨兵高可用架构" class="table-of-contents__link toc-highlight">Redis哨兵高可用架构</a></li><li><a href="#spring-boot整合redis连接" class="table-of-contents__link toc-highlight">Spring Boot整合Redis连接</a></li><li><a href="#高可用集群模式" class="table-of-contents__link toc-highlight">高可用集群模式</a><ul><li><a href="#redis集群原理分析" class="table-of-contents__link toc-highlight">Redis集群原理分析</a></li><li><a href="#redis集群选举原理分析" class="table-of-contents__link toc-highlight">Redis集群选举原理分析</a></li></ul></li><li><a href="#redis-60新特性" class="table-of-contents__link toc-highlight">redis 6.0新特性</a><ul><li><a href="#多线程" class="table-of-contents__link toc-highlight">多线程</a></li><li><a href="#client-side-caching" class="table-of-contents__link toc-highlight">client side caching</a></li><li><a href="#acl" class="table-of-contents__link toc-highlight">ACL</a></li></ul></li></ul></div></div><main class="w-full lg:w-3/4" itemscope="" itemtype="http://schema.org/Blog"><article class="blog-post-item-shadow rounded-[10px] p-4" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="https://test.preview.qingxinzhimei.com/2023/02/08/ERP202302080000001377.jpg"><div class="relative"><div class="absolute top-0 right-0 rounded-bl-[10px] bg-white"><div class="flex items-center space-x-2 px-2 py-1"><button aria-label="twitter" class="react-share__ShareButton flex" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="36" height="36"><circle cx="32" cy="32" r="31" fill="#00aced"></circle><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></svg></button><button aria-label="linkedin" class="react-share__ShareButton flex" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="36" height="36"><circle cx="32" cy="32" r="31" fill="#007fb1"></circle><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z" fill="white"></path></svg></button></div></div><img class="mb-2 rounded-xl" src="https://test.preview.qingxinzhimei.com/2023/02/08/ERP202302080000001377.jpg?w=800" alt="Post image"></div><div class="mb-8 text-sm text-[#525860]"><time datetime="2022-12-21T15:28:14.000Z" itemprop="datePublished">2022年12月21日</time> · <!-- -->阅读需 48 分钟</div><h1 class="text-[2rem] md:text-5xl" itemprop="headline">redis学习笔记</h1><div id="post-content" class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="redis数据结构">Redis数据结构<a href="#redis数据结构" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p><a href="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221221193254400.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221221193254400.png" alt="image-20221221193254400" class="img_ev3q"></a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="常用数据结构及命令">常用数据结构及命令<a href="#常用数据结构及命令" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><ul><li>字符串常用操作</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JAVA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SET  key  value             //存入字符串键值对</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MSET  key  value [key value ...]    //批量存储字符串键值对</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SETNX  key  value       //存入一个不存在的字符串键值对</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">GET  key            //获取一个字符串键值</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MGET  key  [key ...]        //批量获取字符串键值</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">DEL  key  [key ...]         //删除一个键</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">EXPIRE  key  seconds        //设置一个键的过期时间(秒)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>原子加减</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JAVA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">INCR  key           //将key中储存的数字值加1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">DECR  key           //将key中储存的数字值减1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">INCRBY  key  increment      //将key所储存的值加上increment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">DECRBY  key  decrement  //将key所储存的值减去decrement</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>单值缓存</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JAVA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SET  key  value     </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">GET  key </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>对象缓存</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JAVA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">1) SET  user:1  value(json格式数据)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2) MSET  user:1:name  zhuge   user:1:balance  1888</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   MGET  user:1:name   user:1:balance </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>分布式锁</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JAVA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SETNX  product:10001  true      //返回1代表获取锁成功</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SETNX  product:10001  true      //返回0代表获取锁失败</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">。。。执行业务操作</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">DEL  product:10001          //执行完业务释放锁</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SET product:10001 true  ex  10  nx  //防止程序意外终止导致死锁</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>计数器</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JAVA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">INCR article:readcount:{文章id}   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">GET article:readcount:{文章id} </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>分布式系统全局序列号</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JAVA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">INCRBY  orderId  1000       //redis批量生成序列号提升性能</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hash结构常用操作">Hash结构常用操作<a href="#hash结构常用操作" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JAVA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">HSET  key  field  value             //存储一个哈希表key的键值</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">HSETNX  key  field  value       //存储一个不存在的哈希表key的键值</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">HMSET  key  field  value [field value ...]  //在一个哈希表key中存储多个键值对</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">HGET  key  field                //获取哈希表key对应的field键值</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">HMGET  key  field  [field ...]      //批量获取哈希表key中多个field键值</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">HDEL  key  field  [field ...]       //删除哈希表key中的field键值</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">HLEN  key               //返回哈希表key中field的数量</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">HGETALL  key                //返回哈希表key中所有的键值</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">HINCRBY  key  field  increment      //为哈希表key中field键的值加上增量increment</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>对象缓存</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JAVA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">HMSET  user  {userId}:name  zhuge  {userId}:balance  1888</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">HMSET  user  1:name  zhuge  1:balance  1888</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">HMGET  user  1:name  1:balance  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221221194404031.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221221194404031.png" alt="image-20221221194404031" class="img_ev3q"></a></p><ul><li><p>优点</p></li><li><ol><li>同类数据归类整合储存，方便数据管理</li><li>相比string操作消耗内存与cpu更小</li><li>相比string储存更节省空间</li></ol></li><li><p>缺点</p><ol><li>过期功能不能使用在field上，只能用在key上</li><li>1)Redis集群架构下不适合大规模使用</li></ol></li></ul><p><a href="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221221195006963.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221221195006963.png" alt="image-20221221195006963" class="img_ev3q"></a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="list常用操作">List常用操作<a href="#list常用操作" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JAVA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LPUSH  key  value [value ...]       //将一个或多个值value插入到key列表的表头(最左边)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RPUSH  key  value [value ...]       //将一个或多个值value插入到key列表的表尾(最右边)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LPOP  key           //移除并返回key列表的头元素</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RPOP  key           //移除并返回key列表的尾元素</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LRANGE  key  start  stop        //返回列表key中指定区间内的元素，区间以偏移量start和stop指定</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BLPOP  key  [key ...]  timeout  //从key列表表头弹出一个元素，若列表中没有元素，阻塞等待                  timeout秒,如果timeout=0,一直阻塞等待</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BRPOP  key  [key ...]  timeout  //从key列表表尾弹出一个元素，若列表中没有元素，阻塞等待                  timeout秒,如果timeout=0,一直阻塞等待</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221221195110835.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221221195110835.png" alt="image-20221221195110835" class="img_ev3q"></a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="set常用操作">Set常用操作<a href="#set常用操作" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JAVA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SADD  key  member  [member ...]         //往集合key中存入元素，元素存在则忽略，</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            若key不存在则新建</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SREM  key  member  [member ...]         //从集合key中删除元素</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SMEMBERS  key                   //获取集合key中所有元素</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SCARD  key                  //获取集合key的元素个数</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SISMEMBER  key  member          //判断member元素是否存在于集合key中</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SRANDMEMBER  key  [count]           //从集合key中选出count个元素，元素不从key中删除</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SPOP  key  [count]              //从集合key中选出count个元素，元素从key中删除</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Set运算操作</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JAVA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SINTER  key  [key ...]              //交集运算</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SINTERSTORE  destination  key  [key ..]     //将交集结果存入新集合destination中</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SUNION  key  [key ..]               //并集运算</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SUNIONSTORE  destination  key  [key ...]        //将并集结果存入新集合destination中</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SDIFF  key  [key ...]               //差集运算</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SDIFFSTORE  destination  key  [key ...]     //将差集结果存入新集合destination中</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>应用-微信抽奖小程序</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JAVA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">1）点击参与抽奖加入集合</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SADD key {userlD}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2）查看参与抽奖所有用户</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SMEMBERS key      </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">3）抽取count名中奖者</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SRANDMEMBER key [count] / SPOP key [count]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JAVA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">1) 点赞</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SADD  like:{消息ID}  {用户ID}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2) 取消点赞</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SREM like:{消息ID}  {用户ID}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">3) 检查用户是否点过赞</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SISMEMBER  like:{消息ID}  {用户ID}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">4) 获取点赞的用户列表</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SMEMBERS like:{消息ID}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">5) 获取点赞用户数 </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SCARD like:{消息ID}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>集合操作</li></ul><p><a href="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221221195645216.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221221195645216.png" alt="image-20221221195645216" class="img_ev3q"></a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JAVA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SINTER set1 set2 set3 → { c }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SUNION set1 set2 set3 → { a,b,c,d,e }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SDIFF set1 set2 set3 → { a }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="zset常用操作">ZSet常用操作<a href="#zset常用操作" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JAVA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ZADD key score member [[score member]…] //往有序集合key中加入带分值元素</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ZREM key member [member …]      //从有序集合key中删除元素</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ZSCORE key member           //返回有序集合key中元素member的分值</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ZINCRBY key increment member        //为有序集合key中元素member的分值加上increment </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ZCARD key               //返回有序集合key中元素个数</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ZRANGE key start stop [WITHSCORES]  //正序获取有序集合key从start下标到stop下标的元素</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ZREVRANGE key start stop [WITHSCORES]   //倒序获取有序集合key从start下标到stop下标的元素</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Zset集合操作</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JAVA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ZUNIONSTORE destkey numkeys key [key ...]   //并集计算</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ZINTERSTORE destkey numkeys key [key …] //交集计算</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221221200005028.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221221200005028.png" alt="image-20221221200005028" class="img_ev3q"></a></p><ul><li>应用-Zset集合操作实现排行榜</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JAVA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">1）点击新闻</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ZINCRBY  hotNews:20190819  1  守护香港</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2）展示当日排行前十</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ZREVRANGE  hotNews:20190819  0  9  WITHSCORES </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">3）七日搜索榜单计算</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ZUNIONSTORE  hotNews:20190813-20190819  7 </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">hotNews:20190813  hotNews:20190814... hotNews:20190819</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">4）展示七日排行前十</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ZREVRANGE hotNews:20190813-20190819  0  9  WITHSCORES</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="redis常讨论的问题">Redis常讨论的问题<a href="#redis常讨论的问题" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><ul><li>Redis是单线程吗?</li></ul><p>Redis 的单线程主要是指 Redis 的网络 IO 和键值对读写是由一个线程来完成的，这也是 Redis 对外 提供键值存储服务的主要流程。但 Redis 的其他功能，比如持久化、异步删除、集群数据同步等，其实是由额外的线程执行的。</p><ul><li>Redis 单线程为什么还能这么快?</li></ul><p>因为它所有的数据都在内存中，所有的运算都是内存级别的运算，而且单线程避免了多线程的切换性 能损耗问题。正因为 Redis 是单线程，所以要小心使用 Redis 指令，对于那些耗时的指令(比如 keys)，一定要谨慎使用，一不小心就可能会导致 Redis 卡顿。</p><ul><li>Redis 单线程如何处理那么多的并发客户端连接?</li></ul><p>Redis的IO多路复用:redis利用epoll来实现IO多路复用，将连接信息和事件放到队列中，依次放到 文件事件分派器，事件分派器将事件分发给事件处理器。</p><p><a href="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221221200452552.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221221200452552.png" alt="image-20221221200452552" class="img_ev3q"></a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">SHELL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 查看redis支持的最大连接数，在redis.conf文件中可修改，# maxclients 10000 </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">127.0.0.1:6379&gt;CONFIG GET maxclients</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##1) &quot;maxclients&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">##2) &quot;10000&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="其他高级命令">其他高级命令<a href="#其他高级命令" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>Info:查看redis服务运行信息，分为 9 大块，每个块都有非常多的参数，这 9 个块分别是:</p><ol><li>Server 服务器运行的环境参数</li><li>Clients 客户端相关信息</li><li>Memory 服务器运行内存统计数据</li><li>Persistence 持久化信息</li><li>Stats 通用统计数据</li><li>Replication 主从复制相关信息</li><li>CPU CPU 使用情况</li><li>Cluster 集群信息</li><li>KeySpace 键值对统计数量信息</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="redis持久化">Redis持久化<a href="#redis持久化" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rdb快照snapshot">RDB快照(snapshot)<a href="#rdb快照snapshot" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>在默认情况下， Redis 将内存数据库快照保存在名字为 dump.rdb 的二进制文件中。</p><p>你可以对 Redis 进行设置， 让它在“ N 秒内数据集至少有 M 个改动”这一条件被满足时， 自动保存一次 数据集。
比如说， 以下设置会让 Redis 在满足“ 60 秒内有至少有 1000 个键被改动”这一条件时， 自动保存一次 数据集:</p><p>#<!-- --> save 60 1000 //关闭RDB只需要将所有的save保存策略注释掉即可</p><p>还可以手动执行命令生成RDB快照，进入redis客户端执行命令save或bgsave可以生成dump.rdb文件，每次命令执行都会将所有redis内存快照到一个新的rdb文件里，并覆盖原有rdb快照文件。</p><ul><li>bgsave的写时复制(COW)机制</li></ul><p>Redis 借助操作系统提供的写时复制技术(Copy-On-Write, COW)，在生成快照的同时，依然可以正常 处理写命令。简单来说，bgsave 子进程是由主线程 fork 生成的，可以共享主线程的所有内存数据。 bgsave 子进程运行后，开始读取主线程的内存数据，并把它们写入 RDB 文件。此时，如果主线程对这些 数据也都是读操作，那么，主线程和 bgsave 子进程相互不影响。但是，如果主线程要修改一块数据，那 么，这块数据就会被复制一份，生成该数据的副本。然后，bgsave 子进程会把这个副本数据写入 RDB 文 件，而在这个过程中，主线程仍然可以直接修改原来的数据。</p><ul><li>save与bgsave对比:</li></ul><table><thead><tr><th>命令</th><th>save</th><th>bgsave</th></tr></thead><tbody><tr><td>IO类型</td><td>同步</td><td>异步</td></tr><tr><td>是否阻塞redis其它命令</td><td>是</td><td>否(在生成子进程执行调用fork函 数时会有短暂阻塞)</td></tr><tr><td>复杂度</td><td>O(n)</td><td>O(n)</td></tr><tr><td>优点</td><td>不会消耗额外内存</td><td>不阻塞客户端命令</td></tr><tr><td>缺点</td><td>阻塞客户端命令</td><td>需要fork子进程，消耗内存</td></tr></tbody></table><p>配置自动生成rdb文件后台使用的是bgsave方式。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aofappend-only-file">AOF(append-only file)<a href="#aofappend-only-file" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>快照功能并不是非常耐久(durable): 如果 Redis 因为某些原因而造成故障停机， 那么服务器将丢失最近写入、且仍未保存到快照中的那些数据。从 1.1 版本开始， Redis 增加了一种完全耐久的持久化方 式: AOF 持久化，将修改的每一条指令记录进文件appendonly.aof中(先写入os cache，每隔一段时间 fsync到磁盘)</p><p>比如执行命令“set zhuge 666”，aof文件里会记录如下数据</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">SHELL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">set</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">zhuge 6 $3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">666</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这是一种resp协议格式数据，星号后面的数字代表命令有多少个参数，$号后面的数字代表这个参数有几 个字符 注意，如果执行带过期时间的set命令，aof文件里记录的是并不是执行的原始命令，而是记录key过期的 时间戳</p><p>比如执行“set goudan 888 ex 1000”，对应aof文件里记录如下</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">SHELL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">set</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$6</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">goudan 6 $3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">888</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$9</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PEXPIREAT 11 $6</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">goudan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$13</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">1604249786301</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>你可以通过修改配置文件来打开 AOF 功能:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># appendonly yes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>从现在开始， 每当 Redis 执行一个改变数据集的命令时(比如 SET)， 这个命令就会被追加到 AOF 文件的末尾。</p><p>这样的话， 当 Redis 重新启动时， 程序就可以通过重新执行 AOF 文件中的命令来达到重建数据集的目 的。</p><p>你可以配置 Redis 多久才将数据 fsync 到磁盘一次。有三个选项:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">SHELL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">appendfsync always:每次有新命令追加到 AOF 文件时就执行一次 fsync ，非常慢，也非常安全。 </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">appendfsync everysec:每秒 fsync 一次，足够快，并且在故障时只会丢失 1 秒钟的数据。</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">appendfsync no:从不 fsync ，将数据交给操作系统来处理。更快，也更不安全的选择。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>推荐(并且也是默认)的措施为每秒 fsync 一次， 这种 fsync 策略可以兼顾速度和安全性。</p><ul><li>AOF重写</li></ul><p>AOF文件里可能有太多没用指令，所以AOF会定期根据内存的最新数据生成aof文件 例如，执行了如下几条命令:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">SHELL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">incr readcount</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(integer)1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">incr readcount</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(integer)2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">incr readcount</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(integer)3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">incr readcount</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(integer)4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">incr readcount</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(integer)5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>重写后AOF文件里变成</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">SHELL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SET</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">readcount 6 $1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如下两个配置可以控制AOF自动重写频率</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">SHELL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># auto‐aof‐rewrite‐min‐size 64mb //aof文件至少要达到64M才会自动重写，文件太小恢复速度本来就 很快，重写的意义不大</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># auto‐aof‐rewrite‐percentage 100 //aof文件自上一次重写后文件大小增长了100%则再次触发重写</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>当然AOF还可以手动重写，进入redis客户端执行命令bgrewriteaof重写AOF, 注意，AOF重写redis会fork出一个子进程去做(与bgsave命令类似)，不会对redis正常命令处理有太多 影响</p><p>RDB 和 AOF ，我应该用哪一个?</p><table><thead><tr><th>命令</th><th>RDB</th><th>AOF</th></tr></thead><tbody><tr><td>启动优先级</td><td>低</td><td>高</td></tr><tr><td>体积</td><td>小</td><td>大</td></tr><tr><td>恢复速度</td><td>快</td><td>慢</td></tr><tr><td>数据安全性</td><td>容易丢数据</td><td>根据策略决定</td></tr></tbody></table><p>生产环境可以都启用，redis启动时如果既有rdb文件又有aof文件则优先选择aof文件恢复数据，因为aof 一般来说数据更全一点。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="redis-40-混合持久化">Redis 4.0 混合持久化<a href="#redis-40-混合持久化" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>重启 Redis 时，我们很少使用 RDB来恢复内存状态，因为会丢失大量数据。我们通常使用 AOF 日志重 放，但是重放 AOF 日志性能相对 RDB来说要慢很多，这样在 Redis 实例很大的情况下，启动需要花费很 长的时间。 Redis 4.0 为了解决这个问题，带来了一个新的持久化选项——混合持久化。 通过如下配置可以开启混合持久化(必须先开启aof):</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># aof‐use‐rdb‐preamble yes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果开启了混合持久化，AOF在重写时，不再是单纯将内存数据转换为RESP命令写入AOF文件，而是将 重写这一刻之前的内存做RDB快照处理，并且将RDB快照内容和增量的AOF修改内存数据的命令存在一 起，都写入新的AOF文件，新的文件一开始不叫appendonly.aof，等到重写完新的AOF文件才会进行改 名，覆盖原有的AOF文件，完成新旧两个AOF文件的替换。</p><p>于是在 Redis 重启的时候，可以先加载 RDB 的内容，然后再重放增量 AOF 日志就可以完全替代之前的 AOF 全量文件重放，因此重启效率大幅得到提升。</p><p>混合持久化AOF文件结构如下</p><p><a href="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221222101934799.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221222101934799.png" alt="image-20221222101934799" class="img_ev3q"></a></p><ul><li>Redis数据备份策略:<ol><li>写crontab定时调度脚本，每小时都copy一份rdb或aof的备份到一个目录中去，仅仅保留最近48 小时的备份</li><li>每天都保留一份当日的数据备份到一个目录中去，可以保留最近1个月的备份</li><li>每次copy备份的时候，都把太旧的备份给删了</li><li>每天晚上将当前机器上的备份复制一份到其他机器上，以防机器损坏</li></ol></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="redis主从架构">Redis主从架构<a href="#redis主从架构" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p><a href="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221222102114645.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221222102114645.png" alt="image-20221222102114645" class="img_ev3q"></a></p><p><strong>redis主从架构搭建，配置从节点步骤:</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">SHELL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">1、复制一份redis.conf文件 2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2、将相关配置修改为如下值:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">port6380</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pidfile /var/run/redis_6380.pid # 把pid进程号写入pidfile配置的文件</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">logfile&quot;6380.log&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">dir /usr/local/redis‐5.0.3/data/6380 # 指定数据存放目录</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 需要注释掉bind</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#bind127.0.0.1(bind绑定的是自己机器网卡的ip，如果有多块网卡可以配多个ip，代表允许客户端通 过机器的哪些网卡ip去访问，内网一般可以不配置bind，注释掉即可)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">3、配置主从复制</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">replicaof192.168.0.606379#从本机6379的redis实例复制数据，Redis5.0之前使用slaveof</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">replica‐read‐only yes # 配置从节点只读</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">4、启动从节点</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">redis‐serverredis.conf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">5、连接从节点</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">redis‐cli‐p6380</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">6、测试在6379实例上写数据，6380实例是否能及时同步新修改数据</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">7、可以自己再配置一个6381的从节点</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Redis主从工作原理</li></ul><p>如果你为master配置了一个slave，不管这个slave是否是第一次连接上Master，它都会发送一个PSYNC命令给master请求复制数据。 master收到PSYNC命令后，会在后台进行数据持久化通过bgsave生成最新的rdb快照文件，持久化期间，master会继续接收客户端的请求，它会把这些可能修改数据集的请求缓存在内存中。当持久化进行完 毕以后，master会把这份rdb文件数据集发送给slave，slave会把接收到的数据进行持久化生成rdb，然后 再加载到内存中。然后，master再将之前缓存在内存中的命令发送给slave。 当master与slave之间的连接由于某些原因而断开时，slave能够自动重连Master，如果master收到了多 个slave并发连接请求，它只会进行一次持久化，而不是一个连接一次，然后再把这一份持久化的数据发送 给多个并发连接的slave。</p><ul><li>主从复制(全量复制)流程图</li></ul><p><a href="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221222102529412.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221222102529412.png" alt="image-20221222102529412" class="img_ev3q"></a></p><p><strong>数据部分复制</strong></p><p>当master和slave断开重连后，一般都会对整份数据进行复制。但从redis2.8版本开始，redis改用可以支 持部分数据复制的命令PSYNC去master同步数据，slave与master能够在网络连接断开重连后只进行部分 数据复制(断点续传)。</p><p>master会在其内存中创建一个复制数据用的缓存队列，缓存最近一段时间的数据，master和它所有的 slave都维护了复制的数据下标offset和master的进程id，因此，当网络连接断开后，slave会请求master 继续进行未完成的复制，从所记录的数据下标开始。如果master进程id变化了，或者从节点数据下标 offset太旧，已经不在master的缓存队列里了，那么将会进行一次全量数据的复制。</p><ul><li>主从复制(部分复制，断点续传)流程图</li></ul><p><a href="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221222102657214.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221222102657214.png" alt="image-20221222102657214" class="img_ev3q"></a></p><p>如果有很多从节点，为了缓解主从复制风暴(多个从节点同时复制主节点导致主节点压力过大)，可以做如 下架构，让部分从节点与从节点(与主节点同步)同步数据</p><p><a href="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221222102728607.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221222102728607.png" alt="image-20221222102728607" class="img_ev3q"></a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="jedis连接代码示例">Jedis连接代码示例<a href="#jedis连接代码示例" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><ol><li><p>引入相关依赖:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">XML</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;groupId&gt;redis.clients&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;artifactId&gt;jedis&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;version&gt;2.9.0&lt;/version&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>访问代码:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JAVA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  JedisPoolConfig jedisPoolConfig = new JedisPoolConfig();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  jedisPoolConfig.setMaxTotal(20);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  jedisPoolConfig.setMaxIdle(10);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  jedisPoolConfig.setMinIdle(5);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // timeout，这里既是连接超时又是读写超时，从Jedis 2.8开始有区分connectionTimeout和soTimeot的构造函数</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  JedisPool jedisPool = new JedisPool(jedisPoolConfig, &quot;test-hfin.rdb.58dns.org&quot;, 50356, 3000, &quot;xxxxxxxx&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Jedis jedis;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  //从redis连接池里拿出一个连接执行命令</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  jedis = jedisPool.getResource();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  System.out.println(jedis.set(&quot;single&quot;, &quot;苟蛋&quot;));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  System.out.println(jedis.get(&quot;single&quot;));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="redis哨兵高可用架构">Redis哨兵高可用架构<a href="#redis哨兵高可用架构" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p><a href="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221222104848999.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221222104848999.png" alt="image-20221222104848999" class="img_ev3q"></a></p><p>sentinel哨兵是特殊的redis服务，不提供读写服务，主要用来监控redis实例节点。</p><p>哨兵架构下client端第一次从哨兵找出redis的主节点，后续就直接访问redis的主节点，不会每次都通过 sentinel代理访问redis的主节点，当redis的主节点发生变化，哨兵会第一时间感知到，并且将新的redis 主节点通知给client端(这里面redis的client端一般都实现了订阅功能，订阅sentinel发布的节点变动消息)</p><ul><li>redis哨兵架构搭建步骤:</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">SHELL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">1、复制一份sentinel.conf文件</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cpsentinel.confsentinel‐26379.conf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2、将相关配置修改为如下值:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">port 26379</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">daemonize yes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pidfile &quot;/var/run/redis‐sentinel‐26379.pid&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">logfile &quot;26379.log&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">dir &quot;/usr/local/redis‐5.0.3/data&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># sentinel monitor &lt;master‐redis‐name&gt; &lt;master‐redis‐ip&gt; &lt;master‐redis‐port&gt; &lt;quorum&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># quorum是一个数字，指明当有多少个sentinel认为一个master失效时(值一般为:sentinel总数/2+ 1)，master才算真正失效</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sentinel monitor mymaster 192.168.0.606379 2 #mymaster这个名字随便取，客户端访问时会用 到</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">3、启动sentinel哨兵实例</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">src/redis‐sentinelsentinel‐26379.conf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">4、查看sentinel的info信息</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">src/redis‐cli ‐p 26379</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">127.0.0.1:26379&gt;info</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">可以看到Sentinel的info里已经识别出了redis的主从</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">5、可以自己再配置两个sentinel，端口26380和26381，注意上述配置文件里的对应数字都要修改</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>sentinel集群都启动完毕后，会将哨兵集群的元数据信息写入所有sentinel的配置文件里去(追加在文件的 最下面)，我们查看下如下配置文件sentinel-26379.conf，如下所示</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">SHELL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sentinelknown‐replica mymaster 192.168.0.606380 #代表redis主节点的从节点信息</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sentinelknown‐replica mymaster 192.168.0.606381 #代表redis主节点的从节点信息</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sentinelknown‐sentinel mymaster 192.168.0.6026380 52d0a5d70c1f90475b4fc03b6ce7c3c569 35760f #代表感知到的其它哨兵节点</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sentinelknown‐sentinel mymaster 192.168.0.6026381 e9f530d3882f8043f76ebb8e1686438ba8 bd5ca6 #代表感知到的其它哨兵节点</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>当redis主节点如果挂了，哨兵集群会重新选举出新的redis主节点，同时会修改所有sentinel节点配置文件 的集群元数据信息，比如6379的redis如果挂了，假设选举出的新主节点是6380，则sentinel文件里的集 群元数据信息会变成如下所示:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">SHELL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sentinelknown‐replica mymaster 192.168.0.606379 #代表主节点的从节点信息</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sentinelknown‐replica mymaster 192.168.0.606381 #代表主节点的从节点信息</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sentinelknown‐sentinel mymaster 192.168.0.6026380 52d0a5d70c1f90475b4fc03b6ce7c3c569 35760f #代表感知到的其它哨兵节点</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sentinelknown‐sentinel mymaster 192.168.0.6026381 e9f530d3882f8043f76ebb8e1686438ba8 bd5ca6 #代表感知到的其它哨兵节点</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>同时还会修改sentinel文件里之前配置的mymaster对应的6379端口，改为6380</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sentinel monitor mymaster 192.168.0.60 6380 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>当6379的redis实例再次启动时，哨兵集群根据集群元数据信息就可以将6379端口的redis节点作为从节点 加入集群</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="spring-boot整合redis连接">Spring Boot整合Redis连接<a href="#spring-boot整合redis连接" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><ul><li>StringRedisTemplate与RedisTemplate详解</li></ul><p>spring 封装了 RedisTemplate 对象来进行对redis的各种操作，它支持所有的 redis 原生的 api。在 RedisTemplate中提供了几个常用的接口方法的使用，分别是:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JAVA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">privateValueOperations&lt;K,V&gt;valueOps; </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">privateHashOperations&lt;K,V&gt;hashOps;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">privateListOperations&lt;K,V&gt;listOps;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">privateSetOperations&lt;K,V&gt;setOps;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">privateZSetOperations&lt;K,V&gt;zSetOps;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>RedisTemplate中定义了对5种数据结构操作</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JAVA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">redisTemplate.opsForValue();//操作字符串</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">redisTemplate.opsForHash();//操作hash</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">redisTemplate.opsForList();//操作list</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">redisTemplate.opsForSet();//操作set</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">redisTemplate.opsForZSet();//操作有序set</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>StringRedisTemplate继承自RedisTemplate，也一样拥有上面这些操作。</p><p>StringRedisTemplate默认采用的是String的序列化策略，保存的key和value都是采用此策略序列化保存 的。</p><p>RedisTemplate默认采用的是JDK的序列化策略，保存的key和value都是采用此策略序列化保存的。</p><ul><li>Redis客户端命令对应的RedisTemplate中的方法列表</li></ul><table><thead><tr><th>String类型结构</th><th></th></tr></thead><tbody><tr><td>Redis</td><td>RedisTemplate rt</td></tr><tr><td>set key value</td><td>rt.opsForValue().set(“key”,”value”)</td></tr><tr><td>get key</td><td>rt.opsForValue().get(“key”)</td></tr><tr><td>del key</td><td>rt.delete(“key”)</td></tr><tr><td>strlen key</td><td>rt.opsForValue().size(“key”)</td></tr><tr><td>getset key value</td><td>rt.opsForValue().getAndSet(“key”,”value”)</td></tr><tr><td>getrange key start end</td><td>rt.opsForValue().get(“key”,start,end)</td></tr><tr><td>append key value</td><td>rt.opsForValue().append(“key”,”value”)</td></tr><tr><td>Hash结构</td><td></td></tr><tr><td>hmset key field1 value1 field2 value2…</td><td>rt.opsForHash().putAll(“key”,map) //map是一个集合对象</td></tr><tr><td>hset key field value</td><td>rt.opsForHash().put(“key”,”field”,”value”)</td></tr><tr><td>hexists key field</td><td>rt.opsForHash().hasKey(“key”,”field”)</td></tr><tr><td>hgetall key</td><td>rt.opsForHash().entries(“key”) //返回Map对象</td></tr><tr><td>hvals key</td><td>rt.opsForHash().values(“key”) //返回List对象</td></tr><tr><td>hkeys key</td><td>rt.opsForHash().keys(“key”) //返回List对象</td></tr><tr><td>hmget key field1 field2…</td><td>rt.opsForHash().multiGet(“key”,keyList)</td></tr><tr><td>hsetnx key field value</td><td>rt.opsForHash().putIfAbsent(“key”,”field”,”value”</td></tr><tr><td>hdel key field1 field2</td><td>rt.opsForHash().delete(“key”,”field1”,”field2”)</td></tr><tr><td>hget key field</td><td>rt.opsForHash().get(“key”,”field”)</td></tr><tr><td>List结构</td><td></td></tr><tr><td>lpush list node1 node2 node3…</td><td>rt.opsForList().leftPush(“list”,”node”)</td></tr><tr><td></td><td>rt.opsForList().leftPushAll(“list”,list) //list是集合对象</td></tr><tr><td>rpush list node1 node2 node3…</td><td>rt.opsForList().rightPush(“list”,”node”)</td></tr><tr><td></td><td>rt.opsForList().rightPushAll(“list”,list) //list是集合对象</td></tr><tr><td>lindex key index</td><td>rt.opsForList().index(“list”, index)</td></tr><tr><td>llen key</td><td>rt.opsForList().size(“key”)</td></tr><tr><td>lpop key</td><td>rt.opsForList().leftPop(“key”)</td></tr><tr><td>rpop key</td><td>rt.opsForList().rightPop(“key”)</td></tr><tr><td>lpushx list node</td><td>rt.opsForList().leftPushIfPresent(“list”,”node”)</td></tr><tr><td>rpushx list node</td><td>rt.opsForList().rightPushIfPresent(“list”,”node”)</td></tr><tr><td>lrange list start end</td><td>rt.opsForList().range(“list”,start,end)</td></tr><tr><td>lrem list count value</td><td>rt.opsForList().remove(“list”,count,”value”)</td></tr><tr><td>lset key index value</td><td>rt.opsForList().set(“list”,index,”value”)</td></tr><tr><td>Set结构</td><td></td></tr><tr><td>sadd key member1 member2…</td><td>rt.boundSetOps(“key”).add(“member1”,”member2”,…)</td></tr><tr><td></td><td>rt.opsForSet().add(“key”, set) //set是一个集合对象</td></tr><tr><td>scard key</td><td>rt.opsForSet().size(“key”)</td></tr><tr><td>sidff key1 key2</td><td>rt.opsForSet().difference(“key1”,”key2”) //返回一个集合对象</td></tr><tr><td>sinter key1 key2</td><td>rt.opsForSet().intersect(“key1”,”key2”)//同上</td></tr><tr><td>sunion key1 key2</td><td>rt.opsForSet().union(“key1”,”key2”)//同上</td></tr><tr><td>sdiffstore des key1 key2</td><td>rt.opsForSet().differenceAndStore(“key1”,”key2”,”des”)</td></tr><tr><td>sinter des key1 key2</td><td>rt.opsForSet().intersectAndStore(“key1”,”key2”,”des”)</td></tr><tr><td>sunionstore des key1 key2</td><td>rt.opsForSet().unionAndStore(“key1”,”key2”,”des”)</td></tr><tr><td>sismember key member</td><td>rt.opsForSet().isMember(“key”,”member”)</td></tr><tr><td>smembers key</td><td>rt.opsForSet().members(“key”)</td></tr><tr><td>spop key</td><td>rt.opsForSet().pop(“key”)</td></tr><tr><td>srandmember key count</td><td>rt.opsForSet().randomMember(“key”,count)</td></tr><tr><td>srem key member1 member2…</td><td>rt.opsForSet().remove(“key”,”member1”,”member2”,…)</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="高可用集群模式">高可用集群模式<a href="#高可用集群模式" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><p>在redis3.0以前的版本要实现集群一般是借助哨兵sentinel工具来监控master节点的状态，如果master节点异 常，则会做主从切换，将某一台slave作为master，哨兵的配置略微复杂，并且性能和高可用性等各方面表现 一般，特别是在主从切换的瞬间存在访问瞬断的情况，而且哨兵模式只有一个主节点对外提供服务，没法支持 很高的并发，且单个主节点内存也不宜设置得过大，否则会导致持久化文件过大，影响数据恢复或主从同步的 效率</p><p><a href="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221222113452326.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221222113452326.png" alt="image-20221222113452326" class="img_ev3q"></a></p><p>redis集群是一个由多个主从节点群组成的分布式服务器群，它具有复制、高可用和分片特性。Redis集群不需 要sentinel哨兵∙也能完成节点移除和故障转移的功能。需要将每个节点设置成集群模式，这种集群模式没有中 心节点，可水平扩展，据官方文档称可以线性扩展到上万个节点(官方推荐不超过1000个节点)。redis集群的 性能和高可用性均优于之前版本的哨兵模式，且集群配置非常简单</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="redis集群原理分析">Redis集群原理分析<a href="#redis集群原理分析" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>Redis Cluster 将所有数据划分为 16384 个 slots(槽位)，每个节点负责其中一部分槽位。槽位的信息存储于每 个节点中。</p><p>当 Redis Cluster 的客户端来连接集群时，它也会得到一份集群的槽位配置信息并将其缓存在客户端本地。这 样当客户端要查找某个 key 时，可以直接定位到目标节点。同时因为槽位的信息可能会存在客户端与服务器不 一致的情况，还需要纠正机制来实现槽位信息的校验调整。</p><ul><li>槽位定位算法</li></ul><p>Cluster 默认会对 key 值使用 crc16 算法进行 hash 得到一个整数值，然后用这个整数值对 16384 进行取模 来得到具体槽位。
<code>HASH_SLOT = CRC16(key) mod 16384</code></p><ul><li>跳转重定位</li></ul><p>当客户端向一个错误的节点发出了指令，该节点会发现指令的 key 所在的槽位并不归自己管理，这时它会向客 户端发送一个特殊的跳转指令携带目标操作的节点地址，告诉客户端去连这个节点去获取数据。客户端收到指 令后除了跳转到正确的节点上去操作，还会同步更新纠正本地的槽位映射表缓存，后续所有 key 将使用新的槽 位映射表。</p><p><a href="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221222113735483.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221222113735483.png" alt="image-20221222113735483" class="img_ev3q"></a></p><ul><li>Redis集群节点间的通信机制</li></ul><p>redis cluster节点间采取gossip协议进行通信</p><p>维护集群的元数据(集群节点信息，主从角色，节点数量，各节点共享的数据等)有两种方式:集中式和gossip</p><ul><li>集中式:</li></ul><p>优点在于元数据的更新和读取，时效性非常好，一旦元数据出现变更立即就会更新到集中式的存储中，其他节 点读取的时候立即就可以立即感知到;不足在于所有的元数据的更新压力全部集中在一个地方，可能导致元数 据的存储压力。 很多中间件都会借助zookeeper集中式存储元数据。</p><ul><li>gossip:</li></ul><p><a href="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221222113909341.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221222113909341.png" alt="image-20221222113909341" class="img_ev3q"></a></p><p>gossip协议包含多种消息，包括ping，pong，meet，fail等等。</p><ul><li>meet:某个节点发送meet给新加入的节点，让新节点加入集群中，然后新节点就会开始与其他节点进行通 信;</li><li>ping:每个节点都会频繁给其他节点发送ping，其中包含自己的状态还有自己维护的集群元数据，互相通过 ping交换元数据(类似自己感知到的集群节点增加和移除，hash slot信息等);</li><li>pong: 对ping和meet消息的返回，包含自己的状态和其他信息，也可以用于信息广播和更新;</li><li>fail: 某个节点判断另一个节点fail之后，就发送fail给其他节点，通知其他节点，指定的节点宕机了。</li></ul><p>gossip协议的优点在于元数据的更新比较分散，不是集中在一个地方，更新请求会陆陆续续，打到所有节点上 去更新，有一定的延时，降低了压力;缺点在于元数据更新有延时可能导致集群的一些操作会有一些滞后。</p><p>gossip通信的10000端口 每个节点都有一个专门用于节点间gossip通信的端口，就是自己提供服务的端口号+10000，比如7001，那么 用于节点间通信的就是17001端口。 每个节点每隔一段时间都会往另外几个节点发送ping消息，同时其他几 点接收到ping消息之后返回pong消息。</p><ul><li>网络抖动</li></ul><p>真实世界的机房网络往往并不是风平浪静的，它们经常会发生各种各样的小问题。比如网络抖动就是非常常见 的一种现象，突然之间部分连接变得不可访问，然后很快又恢复正常。</p><p>为解决这种问题，Redis Cluster 提供了一种选项<code>cluster-­node­-timeout</code>，表示当某个节点持续 timeout 的时间失联时，才可以认定该节点出现故障，需要进行主从切换。如果没有这个选项，网络抖动会导致主从频 繁切换 (数据的重新复制)。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="redis集群选举原理分析">Redis集群选举原理分析<a href="#redis集群选举原理分析" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>当slave发现自己的master变为FAIL状态时，便尝试进行Failover，以期成为新的master。由于挂掉的master 可能会有多个slave，从而存在多个slave竞争成为master节点的过程， 其过程如下:</p><ol><li>slave发现自己的master变为FAIL</li><li>将自己记录的集群currentEpoch加1，并广播FAILOVER_AUTH_REQUEST 信息</li><li>其他节点收到该信息，只有master响应，判断请求者的合法性，并发送FAILOVER_AUTH_ACK，对每一个 epoch只发送一次ack</li><li>尝试failover的slave收集master返回的FAILOVER_AUTH_ACK</li><li>slave收到超过半数master的ack后变成新Master(这里解释了集群为什么至少需要三个主节点，如果只有两 个，当其中一个挂了，只剩一个主节点是不能选举成功的)</li><li>slave广播Pong消息通知其他集群节点。</li></ol><p>从节点并不是在主节点一进入 FAIL 状态就马上尝试发起选举，而是有一定延迟，一定的延迟确保我们等待 FAIL状态在集群中传播，slave如果立即尝试选举，其它masters或许尚未意识到FAIL状态，可能会拒绝投票 •延迟计算公式:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">DELAY = 500ms + random(0 ~ 500ms) + SLAVE_RANK * 1000ms</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>SLAVE_RANK表示此slave已经从master复制数据的总量的rank。Rank越小代表已复制的数据越新。这种方 式下，持有最新数据的slave将会首先发起选举(理论上)。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="集群脑裂数据丢失问题">集群脑裂数据丢失问题<a href="#集群脑裂数据丢失问题" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><p>redis集群没有过半机制会有脑裂问题，网络分区导致脑裂后多个主节点对外提供写服务，一旦网络分区恢复， 会将其中一个主节点变为从节点，这时会有大量数据丢失。</p><p>规避方法可以在redis配置里加上参数(这种方法不可能百分百避免数据丢失，参考集群leader选举机制):</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JAVA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">min‐replicas‐to‐write 1 //写数据成功最少同步的slave数量，这个数量可以模仿大于半数机制配置，比如 集群总共三个节点可以配置1，加上leader就是2，超过了半数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>注意:这个配置在一定程度上会影响集群的可用性，比如slave要是少于1个，这个集群就算leader正常也不能 提供服务了，需要具体场景权衡选择。</p><ul><li>集群是否完整才能对外提供服务</li></ul><p>当redis.conf的配置cluster-require-full-coverage为no时，表示当负责一个插槽的主库下线且没有相应的从 库进行故障恢复时，集群仍然可用，如果为yes则集群不可用。</p><ul><li>Redis集群为什么至少需要三个master节点，并且推荐节点数为奇数?</li></ul><p>因为新master的选举需要大于半数的集群master节点同意才能选举成功，如果只有两个master节点，当其中 一个挂了，是达不到选举新master的条件的。</p><p>奇数个master节点可以在满足选举该条件的基础上节省一个节点，比如三个master节点和四个master节点的 集群相比，大家如果都挂了一个master节点都能选举新master节点，如果都挂了两个master节点都没法选举 新master节点了，所以奇数的master节点更多的是从节省机器资源角度出发说的。</p><ul><li>Redis集群对批量操作命令的支持</li></ul><p>对于类似mset，mget这样的多个key的原生批量操作命令，redis集群只支持所有key落在同一slot的情况，如 果有多个key一定要用mset命令在redis集群上操作，则可以在key的前面加上{XX}，这样参数数据分片hash计 算的只会是大括号里的值，这样能确保不同的key能落到同一slot里去，示例如下:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">SHELL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mset{user1}:1:name goudan{user1}:1:age18</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>假设name和age计算的hash slot值不一样，但是这条命令在集群下执行，redis只会用大括号里的 user1 做 hash slot计算，所以算出来的slot值肯定相同，最后都能落在同一slot。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="哨兵leader选举流程">哨兵leader选举流程<a href="#哨兵leader选举流程" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4><p>当一个master服务器被某sentinel视为下线状态后，该sentinel会与其他sentinel协商选出sentinel的leader进 行故障转移工作。每个发现master服务器进入下线的sentinel都可以要求其他sentinel选自己为sentinel的 leader，选举是先到先得。同时每个sentinel每次选举都会自增配置纪元(选举周期)，每个纪元中只会选择一 个sentinel的leader。如果所有超过一半的sentinel选举某sentinel作为leader。之后该sentinel进行故障转移 操作，从存活的slave中选举出新的master，这个选举过程跟集群的master选举很类似。 哨兵集群只有一个哨兵节点，redis的主从也能正常运行以及选举master，如果master挂了，那唯一的那个哨 兵节点就是哨兵leader了，可以正常选举新master。不过为了高可用一般都推荐至少部署三个哨兵节点。为什么推荐奇数个哨兵节点原理跟集群奇数个master节点 类似。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="redis-60新特性">redis 6.0新特性<a href="#redis-60新特性" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2><ol><li>多线程</li><li>Client Side Cache</li><li>Acls</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="多线程">多线程<a href="#多线程" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>redis 6.0 提供了多线程的支持，redis 6 以前的版本，严格来说也是多线程，只不过执行用户 命令的请求时单线程模型，还有一些线程用来执行后台任务， 比如 unlink 删除 大key，rdb持久 化等。</p><p>redis 6.0 提供了多线程的读写IO, 但是最终执行用户命令的线程依然是单线程的，这样，就没有 多线程数据的竞争关系，依然很高效。</p><ul><li>redis 6.0 线程执行模式:</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">SHELL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 可以通过如下参数配置多线程模型: 如:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">io‐threads 4 # 这里说 有三个IO 线程，还有一个线程是main线程，main线程负责IO读写和 命令执行操作</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>默认情况下，如上配置，有三个IO线程， 这三个IO线程只会执行 IO中的write 操作，也就是说， read 和 命令执行 都由main线程执行。最后多线程将数据写回到客户端。<a href="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221222115015124.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221222115015124.png" alt="image-20221222115015124" class="img_ev3q"></a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">SHELL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 开启了如下参数:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">io‐threads‐do‐reads yes # 将支持IO线程执行 读写任务。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221222115101641.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221222115101641.png" alt="image-20221222115101641" class="img_ev3q"></a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="client-side-caching">client side caching<a href="#client-side-caching" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>客户端缓存:redis 6 提供了服务端追踪key的变化，客户端缓存数据的特性，这需要客户端实现</p><p><a href="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221222115141327.png" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://raw.githubusercontent.com/lizejiao/img_bed/master/images/image-20221222115141327.png" alt="image-20221222115141327" class="img_ev3q"></a></p><p>执行流程为， 当客户端访问某个key时，服务端将记录key 和 client ，客户端拿到数据后，进行 客户端缓存，这时，当key再次被访问时，key将被直接返回，避免了与redis 服务器的再次交 互，节省服务端资源，当数据被其他请求修改时，服务端将主动通知客户端失效的key，客户端 进行本地失效，下次请求时，重新获取最新数据。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">XML</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;!-- 目前只有lettuce对其进行了支持:--&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;groupId&gt;io.lettuce&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;artifactId&gt;lettuce‐core&lt;/artifactId&gt; </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;version&gt;6.0.0.RELEASE&lt;/version&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="acl">ACL<a href="#acl" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3><p>ACL 是对于命令的访问和执行权限的控制，默认情况下，可以有执行任意的指令，兼容以前版 本</p><p>ACL设置有两种方式:</p><ol><li>命令方式:ACL SETUSER + 具体的权限规则， 通过 ACL SAVE 进行持久化</li><li>对 ACL 配置文件进行编写，并且执行 ACL LOAD 进行加载</li></ol><p>ACL存储有两种方式，但是两种方式不能同时配置，否则直接报错退出进程</p><ol><li>redis 配置文件: redis.conf</li><li>ACL配置文件, 在redis.conf 中通过 aclfile /path 配置acl文件的路径</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">SHELL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 命令方式:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ACL SETUSER alice # 创建一个 用户名为 alice的用户</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>用如上的命令创建的用户语义为:</p><ol><li>处于 off 状态， 它是被禁用的，不能用auth进行认证</li><li>不能访问任何命令</li><li>不能访问任意的key</li><li>没有密码</li></ol><p>如上用户alice 没有任何意义。</p><br><div class="font-montserrat"><span class="font-bold">Tags: </span><div class="inline-flex flex-wrap gap-2"><a class="no-underline" href="/blog/tags/redis"><span class="rounded border border-solid border-[#2A2A42] bg-[#F6F6F9] px-2 py-1 text-[10px] capitalize text-[#2A2A42] transition duration-150 hover:border-[#1890FF] hover:text-[#1890FF]">redis</span></a></div></div></div></article><br><br></main></div></div></div><footer class="refine-footer px-4 pb-24 pt-7 md:px-6 lg:pt-10 lg:pb-24"><div class="mx-auto flex max-w-6xl flex-col gap-5"><div class="flex flex-col items-center gap-6 lg:flex-row lg:gap-20"><div class="w-full max-w-full flex-shrink-0 lg:max-w-[280px]"><svg viewBox="0 0 36 35" height="36" width="72" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="#1890ff"><title>MeetUp</title><desc>Created with Sketch.</desc><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Social-Icons---Isolated" transform="translate(-282.000000, -1742.000000)" fill="#1890ff"><path d="M297.083175,1759.87714 L296.942659,1760.52746 L296.36782,1759.8934 C294.683949,1757.88552 292.098917,1751.73069 290.358143,1748.81004 C289.753111,1747.79623 289.592853,1747.58836 288.121498,1747.52565 C285.790788,1747.42462 283.955949,1747.79275 282.382401,1748.80307 C282.000337,1753.30075 281.384853,1769.0223 283.558788,1773.12049 C284.439046,1774.77881 289.379175,1773.46656 290.644982,1772.67456 C290.746014,1770.11159 290.232724,1767.95972 290.218788,1765.59417 L295.930014,1773.66165 C297.576724,1773.75572 303.200853,1774.02978 303.853498,1772.57585 C304.118272,1771.98475 304.271562,1769.71443 304.308724,1769.08385 C304.398143,1767.57185 304.444595,1766.06449 304.482917,1764.55017 C304.536337,1762.37623 304.495691,1757.93314 304.964853,1756.00772 C305.656982,1756.95649 307.574272,1764.3632 308.070143,1766.12604 C309.083949,1769.7272 310.075691,1772.80927 311.448337,1776.08178 C312.546917,1776.14449 316.580079,1775.18294 317.675175,1774.85778 C316.754272,1770.22656 314.245885,1760.58785 312.988208,1755.59314 C312.179949,1752.38914 311.400724,1749.24088 310.403175,1746.10075 C310.15582,1745.32617 309.918917,1744.5934 309.656466,1743.86991 C309.248853,1742.74927 309.311562,1742.68423 308.104982,1742.43223 C306.374659,1742.07107 304.158917,1741.7912 302.416982,1742.20811 C300.243046,1743.78049 297.136595,1755.90669 297.083175,1759.87714" id="MeetUp"></path></g></g></svg></div></div><div class="flex flex-col gap-6 lg:flex-row lg:gap-20"><div class="font-montserrat w-full max-w-full flex-shrink-0 text-xs tracking-wide text-[#9696B4] lg:max-w-[280px]">从明天起，做一个幸福的人。<br> 喂马，劈柴，周游世界。<br>  从明天起，关心粮食和蔬菜。<br> 我有一所房子，面向大海，春暖花开。<br> 从明天起，和每一个亲人通信。<br>告诉他们我的幸福。<br>那幸福的闪电告诉我的。<br>我将告诉每一个人。 </div><div class="flex-1"><div class="grid grid-cols-3 md:grid-cols-4 lg:grid-cols-5 max-w-[750px] lg:mr-0 place-content-center lg:place-content-end gap-4"><div class="text-[#9696B4] text-xs leading-[24px] font-montserrat"><div class="mb-1 font-extrabold tracking-wide">学习总结</div><ul class="footer__items clean-list"><li class="footer__item"><a class="text-xs leading-[24px] font-montserrat text-[#9696B4]" href="/blog/tags">标签</a></li><li class="footer__item"><a class="text-xs leading-[24px] font-montserrat text-[#9696B4]" href="/blog">Blog</a></li></ul></div><div class="text-[#9696B4] text-xs leading-[24px] font-montserrat"><div class="mb-1 font-extrabold tracking-wide">零星点点</div><ul class="footer__items clean-list"><li class="footer__item"><a class="text-xs leading-[24px] font-montserrat text-[#9696B4]" href="/about">关于我</a></li></ul></div><div class="text-[#9696B4] text-xs leading-[24px] font-montserrat"><div class="mb-1 font-extrabold tracking-wide">友情链接</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://lizejiao.github.io/" target="_blank" rel="noopener noreferrer" class="text-xs leading-[24px] font-montserrat text-[#9696B4]">李苟蛋の家</a></li><li class="footer__item"><a href="https://nav.wujiehutong.com" target="_blank" rel="noopener noreferrer" class="text-xs leading-[24px] font-montserrat text-[#9696B4]">无界互通</a></li></ul></div><div class="text-[#9696B4] text-xs leading-[24px] font-montserrat col-span-3 md:col-span-1 lg:col-span-2 max-w-[216px]"><div class="mb-1 font-extrabold tracking-wide">联系我</div><div><div class="leading-[18px]">微信: jzw89757</div></div><div class="mt-2"><a class="text-[#9696B4] no-underline" href="mailto:1211717080@qq.com">1211717080@qq.com</a></div></div></div></div></div><div class="h-2.5 w-full border-0 border-b-2 border-solid border-b-[#9696B4]"></div><div class="flex flex-col-reverse gap-6 lg:flex-row lg:gap-0"><div class="flex-1"><div class="font-montserrat flex items-center justify-center text-[11px] leading-[12px] text-[#9696B4] sm:text-xs lg:justify-start">Copyright © <!-- -->2023<!-- -->, Mill Jiang from Beijing to wherever you&#x27;re with<!-- --> <!-- -->,Built with Docusaurus.<svg width="20" height="18" viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="ml-2"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.435 1.464a5 5 0 0 0-7.071 0L9.95 2.88 8.536 1.465a5 5 0 1 0-7.072 7.07l8.486 8.486 7.07-7.071 1.415-1.414a5 5 0 0 0 0-7.072Z" fill="#FF1818"></path></svg></div></div></div></div><span class="fixed -left-10 bottom-[20vh] z-10" id="leftReward"></span><span class="fixed -right-10 bottom-[20vh] z-10" id="rightReward"></span></footer></div>
<script src="/assets/js/runtime~main.8fccb9be.js"></script>
<script src="/assets/js/main.3f4d3cd1.js"></script>
</body>
</html>